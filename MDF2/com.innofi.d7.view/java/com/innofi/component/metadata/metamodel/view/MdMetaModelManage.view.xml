<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Property name="metaData">
    <Property name="securityTag">MdTableManage</Property>
  </Property>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="querydataTypeMdMetaModel">
      <Property name="autoCreatePropertyDefs">false</Property>
      <PropertyDef name="id">
        <Property name="dataType">String</Property>
        <Property name="label">元模型ID</Property>
      </PropertyDef>
      <PropertyDef name="parentId">
        <Property name="dataType">String</Property>
        <Property name="label">父元模型ID</Property>
      </PropertyDef>
      <PropertyDef name="mdmCode">
        <Property name="dataType">String</Property>
        <Property name="label">元模型编码</Property>
      </PropertyDef>
      <PropertyDef name="mdmName">
        <Property name="dataType">String</Property>
        <Property name="label">元模型名称</Property>
      </PropertyDef>
      <PropertyDef name="mdmDesc">
        <Property name="dataType">String</Property>
        <Property name="label">元模型描述</Property>
      </PropertyDef>
      <PropertyDef name="nodePic">
        <Property name="dataType">String</Property>
        <Property name="label">显示图标</Property>
      </PropertyDef>
      <PropertyDef name="mdmSeq">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">显示层级</Property>
      </PropertyDef>
      <PropertyDef name="isDiscSonId">
        <Property name="dataType">String</Property>
        <Property name="label">是否显示子类</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;COMM_Y_N&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="savePath">
        <Property name="dataType">String</Property>
        <Property name="label">保存路径</Property>
      </PropertyDef>
      <PropertyDef name="saveType">
        <Property name="dataType">String</Property>
        <Property name="label">保存类型</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;SAVE_TYPE&quot;)}</Property>
        </Property>
        <Property name="visible">false</Property>
      </PropertyDef>
      <PropertyDef name="uiName">
        <Property name="dataType">String</Property>
        <Property name="label">UI界面</Property>
      </PropertyDef>
      <PropertyDef name="mdmLevel">
        <Property name="dataType">BigDecimal</Property>
        <Property name="label">层级</Property>
      </PropertyDef>
      <PropertyDef name="status">
        <Property name="dataType">String</Property>
        <Property name="label">有效状态</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;COMM_STATUS&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="crtOrgCode">
        <Property name="dataType">String</Property>
        <Property name="label">创建机构</Property>
      </PropertyDef>
      <PropertyDef name="crtUserCode">
        <Property name="dataType">String</Property>
        <Property name="label">创建人</Property>
      </PropertyDef>
      <PropertyDef name="crtDate">
        <Property name="dataType">Date</Property>
        <Property name="label">创建日期</Property>
      </PropertyDef>
      <PropertyDef name="updOrgCode">
        <Property name="dataType">String</Property>
        <Property name="label">修改机构</Property>
      </PropertyDef>
      <PropertyDef name="updDate">
        <Property name="dataType">Date</Property>
        <Property name="label">修改日期</Property>
      </PropertyDef>
      <PropertyDef name="updUserCode">
        <Property name="dataType">String</Property>
        <Property name="label">修改人</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <ClientEvent name="onReady">window.findImage=function(imageUrl,dataSetId,dataPathName,propertyName,dialogId){&#xD;
	if(dataPathName == &quot;undefined&quot;||dataPathName == &quot;&quot;){&#xD;
		view.get(&quot;#&quot;+dataSetId).getData(&quot;#&quot;).set(propertyName,imageUrl);&#xD;
	}else{&#xD;
		view.get(&quot;#&quot;+dataSetId).getData(dataPathName).set(propertyName,imageUrl);&#xD;
	}&#xD;
	view.get(&quot;#&quot;+dialogId).hide();&#xD;
}</ClientEvent>
    <DataSet id="dataSetMdMetaModelTree">
      <Property name="dataProvider">mdMetaModelAction#findMetaModelsByParentId</Property>
      <Property name="dataType">[dataTypeMdMetaModel]</Property>
    </DataSet>
    <DataSet id="dataSetMdMetaModelGrid">
      <ClientEvent name="onReady">var mdmId=&quot;${request.getParameter('mdmId')}&quot;;
if(mdmId != &quot;&quot; || mdmId != null){
	parm={parentId:mdmId};
	self.set(&quot;parameter&quot;, parm).flushAsync();
}
</ClientEvent>
      <Property name="dataProvider">mdMetaModelAction#findMdMetaModels</Property>
      <Property name="dataType">[dataTypeMdMetaModel]</Property>
      <Property name="loadMode">manual</Property>
      <Property name="pageSize">${sys.getLong(&quot;mdf.default.pagesize&quot;)}</Property>
    </DataSet>
    <DataSet id="querydataSetMdMetaModel">
      <ClientEvent name="onReady">self.insert({});</ClientEvent>
      <Property name="dataType">[querydataTypeMdMetaModel]</Property>
      <Property name="dataProvider">mdMetaModelAction#findMdMetaModels</Property>
    </DataSet>
    <SplitPanel>
      <ClientEvent name="onCreate">var mdmId=&quot;${request.getParameter('mdmId')}&quot;;
if(mdmId != null &amp;&amp; mdmId != &quot;&quot;){
	self._sideControl.set(&quot;visible&quot;,false);
	self._sideControl.set(&quot;hideMode&quot;,&quot;display&quot;);
	self._sideControl.set(&quot;width&quot;,0);
	self.set(&quot;minPosition&quot;,0);
	self.set(&quot;maxPosition&quot;,0);
	self.set(&quot;collapsed&quot;,true);
	self.set(&quot;collapseable&quot;,false);
	self.set(&quot;position&quot;,0);
}</ClientEvent>
      <Property name="position">150</Property>
      <MainControl>
        <Container>
          <Property name="width">70%</Property>
          <FieldSet layoutConstraint="top">
            <Property name="caption">查询条件</Property>
            <Property name="collapsed">false</Property>
            <Buttons>
              <Button>
                <ClientEvent name="onClick">view.get(&quot;#querydataSetMdMetaModel&quot;).getData(&quot;#&quot;).set(&quot;parentId&quot;,view.get(&quot;#metaModelsDataTree&quot;).get(&quot;currentNode&quot;).get(&quot;data&quot;).get(&quot;id&quot;));
view.get(&quot;#dataSetMdMetaModelGrid&quot;).set(&quot;parameter&quot;, view.get(&quot;#querydataSetMdMetaModel&quot;).getData(&quot;#&quot;)).flushAsync();</ClientEvent>
                <Property name="caption">查询</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
              </Button>
              <Button>
                <ClientEvent name="onClick">view.set(&quot;#querydataSetMdMetaModel.data&quot;,{});
</ClientEvent>
                <Property name="icon">url(>skin>common/icons.gif) -280px -220px</Property>
                <Property name="caption">重置</Property>
              </Button>
            </Buttons>
            <Children>
              <AutoForm id="autoFormMdMetaModelQuery" layoutConstraint="center">
                <Property name="cols">*,*</Property>
                <Property name="dataSet">querydataSetMdMetaModel</Property>
                <Property name="dataType">dataTypeMdMetaModel</Property>
                <AutoFormElement>
                  <Property name="name">mdmCode</Property>
                  <Property name="property">mdmCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">mdmName</Property>
                  <Property name="property">mdmName</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">status</Property>
                  <Property name="property">status</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="property">status</Property>
                      <Property name="trigger">autoMappingDropDown1</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">id</Property>
                  <Property name="property">id</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">parentId</Property>
                  <Property name="property">parentId</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">mdmDesc</Property>
                  <Property name="property">mdmDesc</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">nodePic</Property>
                  <Property name="property">nodePic</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">isDiscSonId</Property>
                  <Property name="property">isDiscSonId</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">mdmSeq</Property>
                  <Property name="property">mdmSeq</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">savePath</Property>
                  <Property name="property">savePath</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">saveType</Property>
                  <Property name="property">saveType</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">uiName</Property>
                  <Property name="property">uiName</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">mdmLevel</Property>
                  <Property name="property">mdmLevel</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="trigger">triggerClear</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">crtUserCode</Property>
                  <Property name="property">crtUserCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">crtDate</Property>
                  <Property name="property">crtDate</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">updDate</Property>
                  <Property name="property">updDate</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">updOrgCode</Property>
                  <Property name="property">updOrgCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">updUserCode</Property>
                  <Property name="property">updUserCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">crtOrgCode</Property>
                  <Property name="property">crtOrgCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Property name="visible">false</Property>
                  <Property name="hideMode">display</Property>
                  <Editor>
                    <TextEditor/>
                  </Editor>
                </AutoFormElement>
              </AutoForm>
            </Children>
          </FieldSet>
          <ToolBar id="toolBarMdMetaModel" layoutConstraint="top">
            <Property name="tags">tags_toolbar</Property>
            <ToolBarButton id="addButton">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelTree&quot;);
var entity = view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;);
var dialog = view.get(&quot;#addMdMetaModelDialog&quot;);
var currentNode = view.get(&quot;#metaModelsDataTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var id = currentEntity.get(&quot;id&quot;);
var viewType = currentEntity.get(&quot;viewType&quot;);
var treeSeq = currentEntity.get(&quot;treeSeq&quot;);
//dataSet.set(&quot;readOnly&quot;,false);
//view.get(&quot;#dataSetMdMetaModelTree.data&quot;).insert();
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;parentId&quot;,id);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;uiName&quot;,&quot;&quot;);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;savePath&quot;,&quot;&quot;);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;saveType&quot;,&quot;&quot;);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;viewType&quot;,&quot;1&quot;);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;status&quot;,&quot;1&quot;);
//view.get(&quot;#dataSetMdMetaModelTree&quot;).getData(&quot;#&quot;).set(&quot;treeSeq&quot;,treeSeq);
view.get(&quot;#dataSetMdMetaModelGrid.data&quot;).insert();
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;parentId&quot;,id);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;uiName&quot;,&quot;&quot;);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;savePath&quot;,&quot;&quot;);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;saveType&quot;,&quot;&quot;);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;viewType&quot;,&quot;1&quot;);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;status&quot;,&quot;1&quot;);
view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;).set(&quot;treeSeq&quot;,treeSeq);
dialog.show();</ClientEvent>
              <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
              <Property name="caption">添加</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
            <ToolBarButton id="updateButton">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var dialog = view.get(&quot;#updateMdMetaModelDialog&quot;);
var entity = dataSet.getData(&quot;#&quot;);
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if(selection.length>1){
	dorado.MessageBox.alert(&quot;只能选择一条记录查看修改！&quot;);
}else if (selection.length == 1){
	dataSet.getData().setCurrent(selection[0]);
	dialog.show();
	dataSet.set(&quot;readOnly&quot;,false);
}</ClientEvent>
              <Property name="caption">修改</Property>
              <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
            <ToolBarButton id="lookButton">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var dialog = view.get(&quot;#lookMdMetaModelDialog&quot;);
var entitys = dataSet.getData();
var found = false;
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}
else if(selection.length>1)
{
	dorado.MessageBox.alert(&quot;只能查看一条记录！&quot;);
}
else if (selection.length == 1) {
	dataSet.getData().setCurrent(selection[0]);
	dialog.show();
	dataSet.set(&quot;readOnly&quot;,true);
}


</ClientEvent>
              <Property name="caption">查看</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -120px</Property>
            </ToolBarButton>
            <ToolBarButton id="activateButton">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var entitys = dataSet.getData();
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);
var action1 = view.get(&quot;#saveMdMetaModelsActionGrid&quot;);
var ds1 = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var ds = view.get(&quot;#dataSetMdMetaModelTree&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
	dorado.MessageBox.confirm(&quot;是否激活？&quot;, function(){
			jQuery.each(selection,function(i,item){
			  item.set(&quot;status&quot;,&quot;1&quot;);
		});
		 action1.execute();
		//ds.flushAsync();
		//ds1.flushAsync();
	});
}</ClientEvent>
              <Property name="caption">激活</Property>
              <Property name="icon">>icons/data_ok.png</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
            <ToolBarButton id="abateButton">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var entitys = dataSet.getData();
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);
var action1 = view.get(&quot;#saveMdMetaModelsActionGrid&quot;);
var ds1 = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var ds = view.get(&quot;#dataSetMdMetaModelTree&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
	dorado.MessageBox.confirm(&quot;是否失效？&quot;, function(){
			jQuery.each(selection,function(i,item){
			//entitys.remove(item);
			item.set(&quot;status&quot;,&quot;0&quot;);
		});
		action1.execute();
		//ds.flushAsync();
		//ds1.flushAsync();
	});
}</ClientEvent>
              <Property name="caption">失效</Property>
              <Property name="icon">>icons/data_delete.png</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
            <ToolBarButton id="mdmDependRelace">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var dialog = view.get(&quot;#mdmDependDialog&quot;);
var entity = dataSet.getData(&quot;#&quot;);
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if(selection.length>1){
	dorado.MessageBox.alert(&quot;只能选择一条记录！&quot;);
}else if (selection.length == 1){
	dataSet.getData().setCurrent(selection[0]);
	var id = dataSet.getData(&quot;#&quot;).get(&quot;id&quot;);
	var path=&quot;${request.contextPath}/com.innofi.component.metadata.mdmdepend.view.MdMdmDependManage.d?id=&quot;+id+&quot;&amp;randomId=&quot;+Math.random();
	view.get(&quot;#mdmDependIFrame&quot;).set(&quot;path&quot;,path)
	dialog.show();
	dataSet.set(&quot;readOnly&quot;,false);
}</ClientEvent>
              <Property name="caption">依赖关系维护</Property>
              <Property name="icon">url(>skin>common/icons.gif) -240px -160px</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
            <ToolBarButton id="businessViewManage">
              <ClientEvent name="onClick">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var dialog = view.get(&quot;#businessViewDialog&quot;);
var iframe = view.get(&quot;#businessViewIFrame&quot;);
var selection = view.get(&quot;#dataGridMdMetaModel&quot;).get(&quot;selection&quot;);

if(selection.length==0){
		var path = &quot;${request.contextPath}/com.innofi.component.metadata.metamodel.view.BusinessViewManage.d?savePath=&quot;+savePath+&quot;&amp;randomId=&quot;+Math.random();
		iframe.set(&quot;path&quot;,path);
		dialog.show();
}else if(selection.length>1){
	dorado.MessageBox.alert(&quot;只能查看一条记录！&quot;);
}else if (selection.length == 1) {
	dataSet.getData().setCurrent(selection[0]);
	var entity = dataSet.getData(&quot;#&quot;);
	if(entity.get(&quot;viewType&quot;)==&quot;3&quot;){
		dorado.MessageBox.alert(&quot;该分类为虚拟元模型不能维护业务视图！&quot;);
	}else{
		var savePath = dataSet.getData(&quot;#&quot;).get(&quot;savePath&quot;);
		var path = &quot;${request.contextPath}/com.innofi.component.metadata.metamodel.view.BusinessViewManage.d?savePath=&quot;+savePath+&quot;&amp;randomId=&quot;+Math.random();
		iframe.set(&quot;path&quot;,path);
		dialog.show();
	}
}
</ClientEvent>
              <Property name="caption">业务视图维护</Property>
              <Property name="icon">>icons/view.gif</Property>
              <Property name="ignored">${param[&quot;isVisible&quot;]}</Property>
            </ToolBarButton>
          </ToolBar>
          <Container>
            <DataGrid id="dataGridMdMetaModel" layoutConstraint="center">
              <Property name="selectionMode">multiRows</Property>
              <Property name="readOnly">true</Property>
              <Property name="rowHeight">26</Property>
              <Property name="height">100%</Property>
              <Property name="width">100%</Property>
              <Property name="highlightCurrentRow">false</Property>
              <Property name="dataType">dataTypeMdMetaModel</Property>
              <Property name="dataSet">dataSetMdMetaModelGrid</Property>
              <RowNumColumn/>
              <RowSelectorColumn/>
              <DataColumn name="mdmCode">
                <Property name="property">mdmCode</Property>
                <Property name="width">100</Property>
              </DataColumn>
              <DataColumn name="mdmName">
                <Property name="property">mdmName</Property>
                <Property name="width">120</Property>
              </DataColumn>
              <DataColumn name="mdmDesc">
                <Property name="property">mdmDesc</Property>
              </DataColumn>
              <DataColumn>
                <Property name="property">mdmSeq</Property>
                <Property name="name">mdmSeq</Property>
                <Property name="visible">true</Property>
                <Property name="width">80</Property>
                <Editor/>
              </DataColumn>
              <DataColumn name="id">
                <Property name="property">id</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="parentId">
                <Property name="property">parentId</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="nodePic">
                <Property name="property">nodePic</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="isDiscSonId">
                <Property name="property">isDiscSonId</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="saveType">
                <Property name="property">saveType</Property>
                <Property name="visible">true</Property>
                <Property name="width">80</Property>
              </DataColumn>
              <DataColumn name="savePath">
                <Property name="property">savePath</Property>
                <Property name="visible">true</Property>
                <Property name="width">120</Property>
              </DataColumn>
              <DataColumn name="status">
                <Property name="property">status</Property>
                <Property name="width">80</Property>
              </DataColumn>
              <DataColumn name="uiName">
                <Property name="property">uiName</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="mdmLevel">
                <Property name="property">mdmLevel</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="crtOrgCode">
                <Property name="property">crtOrgCode</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="crtUserCode">
                <Property name="property">crtUserCode</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="crtDate">
                <Property name="property">crtDate</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="updDate">
                <Property name="property">updDate</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="updOrgCode">
                <Property name="property">updOrgCode</Property>
                <Property name="visible">false</Property>
              </DataColumn>
              <DataColumn name="updUserCode">
                <Property name="property">updUserCode</Property>
                <Property name="visible">false</Property>
              </DataColumn>
            </DataGrid>
          </Container>
          <ToolBar layoutConstraint="bottom">
            <DataPilot>
              <Property name="dataSet">dataSetMdMetaModelGrid</Property>
              <Property name="itemCodes">pages</Property>
            </DataPilot>
          </ToolBar>
        </Container>
      </MainControl>
      <SideControl>
        <Container>
          <Property name="width">30%</Property>
          <DataTree id="metaModelsDataTree">
            <ClientEvent name="onDataRowClick">var node = self.get(&quot;currentNode&quot;);
if (node) {
	var entity = node.get(&quot;data&quot;);
	if(entity){
		var parameter = {
			parentId:entity.get(&quot;id&quot;)
		};
		var ds = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
		ds.set(&quot;parameter&quot;, parameter);
		ds.flushAsync();
	}
}</ClientEvent>
            <ClientEvent name="onNodeAttached">var node = self.get(&quot;currentNode&quot;);
if (node) {
	var entity = node.get(&quot;data&quot;);
	if(entity){
		var parameter = {
			parentId:entity.get(&quot;id&quot;)
		};
		var ds = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
		ds.set(&quot;parameter&quot;, parameter);
		ds.flushAsync();
	}
}</ClientEvent>
            <Property name="dataSet">dataSetMdMetaModelTree</Property>
            <Property name="currentNodeDataPath">CURRENT_METAMODEL</Property>
            <BindingConfigs>
              <BindingConfig>
                <Property name="childrenProperty">children</Property>
                <Property name="expandLevel">1</Property>
                <Property name="labelProperty">mdmName</Property>
                <Property name="recursive">true</Property>
                <Property name="iconProperty">nodePic</Property>
              </BindingConfig>
            </BindingConfigs>
          </DataTree>
        </Container>
      </SideControl>
    </SplitPanel>
    <UpdateAction id="saveMdMetaModelsActionTree">
      <Property name="executingMessage">正在处理...</Property>
      <Property name="successMessage">操作成功</Property>
      <Property name="dataResolver">mdMetaModelAction#saveMdMetaModels</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetMdMetaModelTree</Property>
      </UpdateItem>
    </UpdateAction>
    <UpdateAction id="saveMdMetaModelsActionGrid">
      <Property name="executingMessage">正在处理...</Property>
      <Property name="successMessage">操作成功</Property>
      <Property name="dataResolver">mdMetaModelAction#saveMdMetaModels</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetMdMetaModelGrid</Property>
      </UpdateItem>
    </UpdateAction>
    <Dialog id="addMdMetaModelDialog">
      <ClientEvent name="onClose">view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData().cancel();
view.get(&quot;#addMdMetaModelDialog&quot;).hide();</ClientEvent>
      <Property name="caption">新增信息</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">60%</Property>
      <Property name="height">80%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var action = view.get(&quot;#saveMdMetaModelsActionGrid&quot;);
var dialog = view.get(&quot;#addMdMetaModelDialog&quot;);
var ds1 = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var ds = view.get(&quot;#dataSetMdMetaModelTree&quot;);

ds1.getData(&quot;#&quot;).set(&quot;treeSeq&quot;,ds1.getData(&quot;#&quot;).get(&quot;treeSeq&quot;)+&quot;.&quot;+ds1.getData(&quot;#&quot;).get(&quot;mdmCode&quot;));

	action.execute(function(){
		dialog.hide();
		ds.flushAsync();
		ds1.flushAsync();
	});</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData().cancel();
view.get(&quot;#addMdMetaModelDialog&quot;).hide();		  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <FieldSet>
          <Property name="caption">元模型信息</Property>
          <Buttons/>
          <Children>
            <AutoForm id="addAutoFormMdMetaModel">
              <Property name="dataType">dataTypeMdMetaModel</Property>
              <Property name="dataSet">dataSetMdMetaModelGrid</Property>
              <Property name="labelAlign">right</Property>
              <Property name="hideMode">visibility</Property>
              <Property name="cols">*</Property>
              <AutoFormElement>
                <Property name="name">mdmCode</Property>
                <Property name="property">mdmCode</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmName</Property>
                <Property name="property">mdmName</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <ClientEvent name="onBlur">var entity = view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;);&#xD;
&#xD;
if(entity.get(&quot;isDiscSonId&quot;)==&quot;1&quot;){&#xD;
	entity.set(&quot;uiName&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addUiNameElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
	entity.set(&quot;savePath&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addSavePathElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
	entity.set(&quot;saveType&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addSaveTypeElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
}else{&#xD;
	entity.set(&quot;uiName&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addUiNameElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	entity.set(&quot;savePath&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addSavePathElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	entity.set(&quot;saveType&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#addSaveTypeElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	entity.setMessages(&quot;savePath&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	entity.setMessages(&quot;saveType&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	entity.setMessages(&quot;uiName&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	entity.setMessages(&quot;nodePic&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
}&#xD;
</ClientEvent>
                <Property name="name">isDiscSonId</Property>
                <Property name="property">isDiscSonId</Property>
                <Property name="labelWidth">120</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">nodePic</Property>
                <Property name="property">nodePic</Property>
                <Property name="labelWidth">120</Property>
                <Property name="trigger">pictTriggerForGrid</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="addUiNameElement">
                <Property name="name">uiName</Property>
                <Property name="property">uiName</Property>
                <Property name="labelWidth">120</Property>
                <Property name="trigger">sysMenuSingleDropDown</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="addSavePathElement">
                <Property name="name">savePath</Property>
                <Property name="property">savePath</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="addSaveTypeElement">
                <Property name="name">saveType</Property>
                <Property name="property">saveType</Property>
                <Property name="labelWidth">120</Property>
                <Property name="visible">true</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmSeq</Property>
                <Property name="property">mdmSeq</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">status</Property>
                <Property name="property">status</Property>
                <Property name="labelWidth">120</Property>
                <Property name="editorType">TextEditor</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmDesc</Property>
                <Property name="property">mdmDesc</Property>
                <Property name="labelWidth">120</Property>
                <Property name="editorType">TextArea</Property>
                <Property name="height">60</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
            </AutoForm>
          </Children>
        </FieldSet>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="updateMdMetaModelDialog">
      <ClientEvent name="onClose">view.get(&quot;#dataSetMdMetaModelTree&quot;).getData().cancel();
view.get(&quot;#updateMdMetaModelDialog&quot;).hide();</ClientEvent>
      <Property name="caption">信息编辑</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">60%</Property>
      <Property name="height">80%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var action1 = view.get(&quot;#saveMdMetaModelsActionGrid&quot;);
var dialog = view.get(&quot;#updateMdMetaModelDialog&quot;);
var ds1 = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var ds = view.get(&quot;#dataSetMdMetaModelTree&quot;);




	action1.execute(function(){
		dialog.hide();
		ds.flushAsync();
		ds1.flushAsync();
	});</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetMdMetaModelTree&quot;).getData().cancel();
view.get(&quot;#updateMdMetaModelDialog&quot;).hide();</ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <FieldSet>
          <Property name="caption">元模型信息</Property>
          <Buttons/>
          <Children>
            <AutoForm id="autoFormMdMetaModel">
              <Property name="dataType">dataTypeMdMetaModel</Property>
              <Property name="dataSet">dataSetMdMetaModelGrid</Property>
              <Property name="labelAlign">right</Property>
              <Property name="hideMode">visibility</Property>
              <Property name="cols">*</Property>
              <AutoFormElement>
                <Property name="name">mdmCode</Property>
                <Property name="property">mdmCode</Property>
                <Property name="labelWidth">120</Property>
                <Property name="readOnly">true</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmName</Property>
                <Property name="property">mdmName</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <ClientEvent name="onBlur">var entity = view.get(&quot;#dataSetMdMetaModelGrid&quot;).getData(&quot;#&quot;);&#xD;
&#xD;
if(entity.get(&quot;isDiscSonId&quot;)==&quot;1&quot;){&#xD;
	entity.set(&quot;uiName&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#updUiNameElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
	entity.set(&quot;savePath&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#updSavePathElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
	entity.set(&quot;saveType&quot;,&quot;&quot;);&#xD;
	view.get(&quot;#updSaveTypeElement&quot;).set(&quot;readOnly&quot;,true);&#xD;
}else{&#xD;
	view.get(&quot;#updUiNameElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	view.get(&quot;#updSavePathElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	view.get(&quot;#updSaveTypeElement&quot;).set(&quot;readOnly&quot;,false);&#xD;
	&#xD;
	if(entity.get(&quot;savePath&quot;)==&quot;&quot;){&#xD;
		entity.setMessages(&quot;savePath&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	}&#xD;
	if(entity.get(&quot;saveType&quot;)==&quot;&quot;){&#xD;
		entity.setMessages(&quot;saveType&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	}&#xD;
	if(entity.get(&quot;uiName&quot;)==&quot;&quot;){&#xD;
		entity.setMessages(&quot;uiName&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	}&#xD;
	if(entity.get(&quot;nodePic&quot;)==&quot;&quot;){&#xD;
		entity.setMessages(&quot;nodePic&quot;,{state:&quot;error&quot;,text:&quot;内容不能为空&quot;});&#xD;
	}&#xD;
}</ClientEvent>
                <Property name="name">isDiscSonId</Property>
                <Property name="property">isDiscSonId</Property>
                <Property name="labelWidth">120</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">nodePic</Property>
                <Property name="property">nodePic</Property>
                <Property name="labelWidth">120</Property>
                <Property name="trigger">pictTriggerForGrid</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="updUiNameElement">
                <Property name="name">uiName</Property>
                <Property name="property">uiName</Property>
                <Property name="labelWidth">120</Property>
                <Property name="trigger">sysMenuSingleDropDown</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="updSavePathElement">
                <Property name="name">savePath</Property>
                <Property name="property">savePath</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement id="updSaveTypeElement">
                <Property name="name">saveType</Property>
                <Property name="property">saveType</Property>
                <Property name="labelWidth">120</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmSeq</Property>
                <Property name="property">mdmSeq</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">status</Property>
                <Property name="property">status</Property>
                <Property name="labelWidth">120</Property>
                <Property name="editorType">TextEditor</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmDesc</Property>
                <Property name="property">mdmDesc</Property>
                <Property name="labelWidth">120</Property>
                <Property name="editorType">TextArea</Property>
                <Property name="height">60</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
            </AutoForm>
          </Children>
        </FieldSet>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="lookMdMetaModelDialog">
      <ClientEvent name="onClose">view.get(&quot;#lookMdMetaModelDialog&quot;).hide();     </ClientEvent>
      <Property name="caption">信息查看</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="height">80%</Property>
      <Property name="width">60%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#lookMdMetaModelDialog&quot;).hide();</ClientEvent>
          <Property name="caption">关闭</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <FieldSet>
          <Property name="caption">元模型信息</Property>
          <Buttons/>
          <Children>
            <AutoForm id="lookFormMdMetaModel">
              <Property name="dataType">dataTypeMdMetaModel</Property>
              <Property name="dataSet">dataSetMdMetaModelGrid</Property>
              <Property name="labelAlign">right</Property>
              <Property name="hideMode">visibility</Property>
              <Property name="cols">*</Property>
              <AutoFormElement>
                <Property name="name">parentMdmName</Property>
                <Property name="property">parentMdmName</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmCode</Property>
                <Property name="property">mdmCode</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmName</Property>
                <Property name="property">mdmName</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmDesc</Property>
                <Property name="property">mdmDesc</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">nodePic</Property>
                <Property name="property">nodePic</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">isDiscSonId</Property>
                <Property name="property">isDiscSonId</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">savePath</Property>
                <Property name="property">savePath</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">saveType</Property>
                <Property name="property">saveType</Property>
                <Property name="labelWidth">120</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">uiName</Property>
                <Property name="property">uiName</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmLevel</Property>
                <Property name="property">mdmLevel</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">mdmSeq</Property>
                <Property name="property">mdmSeq</Property>
                <Property name="labelWidth">120</Property>
                <Property name="hideMode">display</Property>
                <Property name="visible">false</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">status</Property>
                <Property name="property">status</Property>
                <Property name="labelWidth">120</Property>
                <Editor/>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">id</Property>
                <Property name="property">id</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">crtOrgCode</Property>
                <Property name="property">crtOrgCode</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">crtUserCode</Property>
                <Property name="property">crtUserCode</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">crtDate</Property>
                <Property name="property">crtDate</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">updDate</Property>
                <Property name="property">updDate</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">updOrgCode</Property>
                <Property name="property">updOrgCode</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">updUserCode</Property>
                <Property name="property">updUserCode</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Property name="labelWidth">120</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">treeSeq</Property>
                <Property name="property">treeSeq</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <AutoFormElement>
                <Property name="name">viewType</Property>
                <Property name="property">viewType</Property>
                <Property name="visible">false</Property>
                <Property name="hideMode">display</Property>
                <Editor>
                  <TextEditor/>
                </Editor>
              </AutoFormElement>
              <Container/>
            </AutoForm>
          </Children>
        </FieldSet>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="mdmDependDialog">
      <Property name="caption">元模型关系维护</Property>
      <Property name="width">90%</Property>
      <Property name="height">90%</Property>
      <Property name="center">true</Property>
      <Property name="modal">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="minimizeable">true</Property>
      <Buttons/>
      <Children>
        <IFrame id="mdmDependIFrame"/>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="businessViewDialog">
      <Property name="modal">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="minimizeable">true</Property>
      <Property name="center">true</Property>
      <Property name="width">90%</Property>
      <Property name="height">90%</Property>
      <Property name="caption">业务视图维护</Property>
      <Buttons/>
      <Children>
        <IFrame id="businessViewIFrame"/>
      </Children>
      <Tools/>
    </Dialog>
    <AjaxAction id="checkTableRelateajaxAction">
      <Property name="service">mdMetaModelAction#checkMetaModelRelate</Property>
    </AjaxAction>
    <AjaxAction id="findTableNameAjaxAction">
      <Property name="service">mdTableAction#findTableNameByUiName</Property>
    </AjaxAction>
    <CustomDropDown id="sysMenuSingleDropDown">
      <ClientEvent name="onClose">var dataSet = view.get(&quot;#dataSetMdMetaModelGrid&quot;);
var ajaxAction = view.get(&quot;#findTableNameAjaxAction&quot;);
if(arg.selectedValue){
	var entity = new dorado.Entity();
	entity.fromJSON(JSON.parse(arg.selectedValue));
	var parm = {uiName:entity.get(&quot;menuUrl&quot;)};
	ajaxAction.set(&quot;parameter&quot;,parm).execute(function(result){
		if(result==&quot;&quot;){
			dorado.MessageBox.alert(&quot;该菜单不能被管理为元数据,请重新选择!&quot;);
		}else{
			var relateAjaxAction = view.get(&quot;#checkTableRelateajaxAction&quot;);
			var currentNode = view.get(&quot;#metaModelsDataTree&quot;).get(&quot;currentNode&quot;);
			var currentEntity = currentNode.get(&quot;data&quot;);
			if(currentEntity.get(&quot;id&quot;)==null||currentEntity.get(&quot;id&quot;)==&quot;&quot;){
				dataSet.getData(&quot;#&quot;).set(&quot;uiName&quot;,entity.get(&quot;menuUrl&quot;));
				dataSet.getData(&quot;#&quot;).set(&quot;savePath&quot;,result);
			}else if(currentEntity.get(&quot;viewType&quot;)==&quot;3&quot;){
				dataSet.getData(&quot;#&quot;).set(&quot;uiName&quot;,entity.get(&quot;menuUrl&quot;));
				dataSet.getData(&quot;#&quot;).set(&quot;savePath&quot;,result);
			}else{
				var upMdmId = currentEntity.get(&quot;id&quot;);
				para={upMdmId:upMdmId,foreignTableName:result};
				relateAjaxAction.set(&quot;parameter&quot;,para).execute(function(resultRelate){
					if(resultRelate != &quot;0&quot;&amp;&amp;currentEntity.get(&quot;viewType&quot;)!=&quot;3&quot;){
						dorado.MessageBox.alert(&quot;该菜单与上级模型没有主外键关系,不能被管理为元数据,请重新选择!&quot;);
						//arg.entity.setMessages(&quot;savePath&quot;,{state:&quot;error&quot;,text:&quot;跟上级没有关联关系,不能添加!&quot;});
					}else{
						dataSet.getData(&quot;#&quot;).set(&quot;uiName&quot;,entity.get(&quot;menuUrl&quot;));
						dataSet.getData(&quot;#&quot;).set(&quot;savePath&quot;,result);	
					}
				});
			}
		}
	});
	dataSet.notifyObservers();
}
arg.selectedValue = undefined;
return false;</ClientEvent>
      <Property name="autoOpen">true</Property>
      <Property name="editable">true</Property>
      <Property name="height">300</Property>
      <IFrame>
        <Property name="path">${request.contextPath}/com/innofi/module/commons/view/dropdown/SysMenuSelect.d?dropdown=sysMenuSingleDropDown</Property>
      </IFrame>
    </CustomDropDown>
    <Trigger id="pictTriggerForTree">
      <ClientEvent name="onExecute">var pictDialog=view.get(&quot;#pictDialog&quot;);&#xD;
var imagePath=&quot;/icons&quot;;&#xD;
var dataSetId=&quot;dataSetMdMetaModelTree&quot;;&#xD;
var datapath=&quot;!CURRENT_METAMODEL&quot;;&#xD;
var property=&quot;nodePic&quot;;&#xD;
var dialog=&quot;pictDialog&quot;;&#xD;
var path=&quot;${request.contextPath}/com/innofi/module/commons/view/component/PictureSelection.d?imagePath=&quot;+imagePath+&quot;&amp;dataset=&quot;+dataSetId+&quot;&amp;datapath=&quot;+datapath+&quot;&amp;property=&quot;+property+&quot;&amp;dialog=&quot;+dialog;&#xD;
view.get(&quot;#imageFrame&quot;).set(&quot;path&quot;,path);&#xD;
pictDialog.show();</ClientEvent>
      <Property name="iconClass">d-trigger-icon-search</Property>
    </Trigger>
    <Dialog id="pictDialog">
      <Property name="caption">图标选择</Property>
      <Property name="center">true</Property>
      <Property name="contentOverflow">auto</Property>
      <Property name="modal">true</Property>
      <Property name="height">500</Property>
      <Property name="width">530</Property>
      <Buttons/>
      <Children>
        <IFrame id="imageFrame"/>
      </Children>
      <Tools/>
    </Dialog>
    <Trigger id="pictTriggerForGrid">
      <ClientEvent name="onExecute">var pictDialog=view.get(&quot;#pictDialog&quot;);&#xD;
var imagePath=&quot;/icons&quot;;&#xD;
var dataSetId=&quot;dataSetMdMetaModelGrid&quot;;&#xD;
var datapath=&quot;&quot;;&#xD;
var property=&quot;nodePic&quot;;&#xD;
var dialog=&quot;pictDialog&quot;;&#xD;
var path=&quot;${request.contextPath}/com/innofi/module/commons/view/component/PictureSelection.d?imagePath=&quot;+imagePath+&quot;&amp;dataset=&quot;+dataSetId+&quot;&amp;datapath=&quot;+datapath+&quot;&amp;property=&quot;+property+&quot;&amp;dialog=&quot;+dialog;&#xD;
view.get(&quot;#imageFrame&quot;).set(&quot;path&quot;,path);&#xD;
pictDialog.show();</ClientEvent>
      <Property name="iconClass">d-trigger-icon-search</Property>
    </Trigger>
  </View>
</ViewConfig>
