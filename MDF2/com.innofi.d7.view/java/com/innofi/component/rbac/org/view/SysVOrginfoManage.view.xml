<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="OrgInfo" parent="dataTypeSysOrgInfo">
      <ClientEvent name="onDataChange">if (arg.property==&quot;orgCode&quot;){
	view.get(&quot;#checkCode&quot;).set(&quot;parameter&quot;, arg.value).execute(function(result) {
		if(result==&quot;true&quot;)
		{
			arg.entity.setMessages(&quot;orgCode&quot;,{ state: &quot;error&quot;, text: &quot;该编号已经被使用,请重新输入!&quot; });
		}
		/*
		else{
			var category=arg.entity.get(&quot;category&quot;);
			if(category==&quot;1&quot;){
				arg.entity.set(&quot;orgSeq&quot;,arg.entity.get(&quot;orgSeq&quot;)+arg.value+&quot;.&quot;)
			}
		}
		*/
	});
};</ClientEvent>
      <Property name="acceptValidationState">warn</Property>
      <Reference name="children">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">sysOrgInfoAction#findSysOrgInfoTreeGridForPolicy</Property>
        <Property name="parameter">
          <Entity>
            <Property name="parentOrgId">$${this.id}</Property>
          </Entity>
        </Property>
      </Reference>
      <PropertyDef name="hasChild">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="parentDeptName">
        <Property name="dataType">String</Property>
        <Property name="label">上级部门</Property>
      </PropertyDef>
      <PropertyDef name="parentOrgName">
        <Property name="label">上级机构</Property>
      </PropertyDef>
      <PropertyDef name="policyFlag">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
      <PropertyDef name="deptRoles">
        <Property name="label">部门角色</Property>
      </PropertyDef>
    </DataType>
    <DataType name="orgQuery">
      <PropertyDef name="orgCode">
        <Property name="label">机构编码</Property>
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="orgName">
        <Property name="label">机构名称</Property>
        <Property name="dataType">String</Property>
      </PropertyDef>
    </DataType>
    <DataType name="orgRole" parent="dataTypeSysOrgRole">
      <PropertyDef name="roleName">
        <Property name="dataType">String</Property>
        <Property name="label">角色名称</Property>
      </PropertyDef>
      <PropertyDef name="roleType">
        <Property name="dataType">String</Property>
        <Property name="label">角色类型</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;ROLE_TYPE&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="status">
        <Property name="dataType">String</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;COMM_STATUS&quot;)}</Property>
        </Property>
        <Property name="label">状态</Property>
      </PropertyDef>
    </DataType>
    <DataType name="sysRole" parent="dataTypeSysRole">
      <PropertyDef name="selectFlag">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeRoleQuery">
      <PropertyDef name="roleName">
        <Property name="dataType">String</Property>
        <Property name="label">角色名称</Property>
      </PropertyDef>
    </DataType>
    <DataType name="orgBusiness" parent="dataTypeSysObjBusiness">
      <PropertyDef name="busilineName">
        <Property name="label">业务条线名称</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeSysBusinessLine" parent="global:dataTypeSysBusinessLine">
      <Property name="autoCreatePropertyDefs">false</Property>
      <Reference name="children">
        <Property name="dataType">[SELF]</Property>
        <Property name="dataProvider">sysBusinessLineAction#findSysBusinessLineByParentId</Property>
        <Property name="parameter">$${this.id}</Property>
      </Reference>
      <PropertyDef name="busilineBaselName">
        <Property name="label">Basel业务条线</Property>
        <Property name="dataType">String</Property>
      </PropertyDef>
      <PropertyDef name="belongOrgName">
        <Property name="dataType">String</Property>
        <Property name="label">管理部门</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <Property name="title">机构管理</Property>
    <Property name="packages">validator</Property>
    <DataSet id="dataSetOrg">
      <Property name="dataType">[OrgInfo]</Property>
      <Property name="dataProvider">sysOrgInfoAction#findSysOrgInfoTreeGridForPolicy</Property>
      <Property name="parameter">
        <Entity>
          <Property name="parentOrgId">${sys.getString(&quot;mdf.orgRoot&quot;)}</Property>
        </Entity>
      </Property>
    </DataSet>
    <DataSet id="dataSetQuery">
      <ClientEvent name="onReady">self.insert({});
</ClientEvent>
      <Property name="dataType">orgQuery</Property>
    </DataSet>
    <DataSet id="dataSetOrgRole">
      <Property name="dataType">[orgRole]</Property>
      <Property name="loadMode">manual</Property>
      <Property name="dataProvider">sysOrgRoleAction#findSysOrgRoleByOrgId</Property>
    </DataSet>
    <DataSet id="dataSetRole">
      <Property name="dataType">[sysRole]</Property>
      <Property name="loadMode">manual</Property>
      <Property name="dataProvider">sysOrgRoleAction#findSysRoleByOrgId</Property>
      <Property name="pageSize">10</Property>
    </DataSet>
    <DataSet id="dataSetRoleQuery">
      <ClientEvent name="onReady">self.insert({});</ClientEvent>
      <Property name="dataType">dataTypeRoleQuery</Property>
    </DataSet>
    <DataSet id="dataSetOrgBusiness">
      <Property name="loadMode">manual</Property>
      <Property name="dataProvider">sysObjBusinessAction#findSysObjBusinesss</Property>
      <Property name="dataType">[orgBusiness]</Property>
      <Property name="pageSize">${sys.getLong(&quot;mdf.default.pagesize&quot;)}</Property>
    </DataSet>
    <DataSet id="dataSetBizLine">
      <Property name="loadMode">manual</Property>
      <Property name="dataProvider">sysBusinessLineAction#findSysBusinessLines</Property>
      <Property name="dataType">[dataTypeSysBusinessLine]</Property>
      <Property name="pageSize">${sys.getLong(&quot;mdf.default.pagesize&quot;)}</Property>
    </DataSet>
    <SplitPanel>
      <Property name="position">40%</Property>
      <Property name="direction">right</Property>
      <MainControl>
        <Container>
          <FieldSet layoutConstraint="top">
            <Property name="buttonAlign">center</Property>
            <Property name="caption">查询</Property>
            <Buttons>
              <Button id="queryButton">
                <ClientEvent name="onClick">var orgName=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgName&quot;);
var orgCode=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgCode&quot;);
//var category=&quot;1&quot;;
if((orgName==&quot;&quot; || orgName==undefined) &amp;&amp; (orgCode==&quot;&quot; || orgCode==undefined)){
	//var param={&quot;parentOrgId&quot;:&quot;0&quot;,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	var param={&quot;parentOrgId&quot;:&quot;0&quot;,&quot;orgName&quot;:orgName};
}else{
	//var param={&quot;orgCode&quot;:orgCode,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	var param={&quot;orgCode&quot;:orgCode,&quot;orgName&quot;:orgName};
}
view.get(&quot;#dataSetOrg&quot;).set(&quot;parameter&quot;,param).flushAsync();

</ClientEvent>
                <Property name="caption">查询</Property>
                <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
              </Button>
              <Button id="resetButton">
                <ClientEvent name="onClick">var entity = view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;);
with (entity){
	set(&quot;orgCode&quot;,&quot;&quot;);
	set(&quot;orgName&quot;,&quot;&quot;);
};
            
</ClientEvent>
                <Property name="icon">url(>skin>common/icons.gif) -280px -220px</Property>
                <Property name="caption">重置</Property>
              </Button>
            </Buttons>
            <Children>
              <AutoForm>
                <Property name="dataSet">dataSetQuery</Property>
                <Property name="cols">*,*</Property>
                <Property name="labelAlign">right</Property>
                <Property name="dataType">orgQuery</Property>
                <AutoFormElement>
                  <Property name="name">orgCode</Property>
                  <Property name="property">orgCode</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">orgName</Property>
                  <Property name="property">orgName</Property>
                  <Property name="showLabel">true</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor/>
                </AutoFormElement>
              </AutoForm>
            </Children>
          </FieldSet>
          <ToolBar id="toolBar1" layoutConstraint="top">
            <Property name="tags">tags_toolbar</Property>
            <ToolBarButton id="buttonAdd">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var category=currentEntity.get(&quot;category&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能添加数据！&quot;);
	return;
}
if(category!=&quot;1&quot;){
	dorado.MessageBox.alert(&quot;请选择类型为机构的节点！&quot;);
	return;
}
	currentNode.expandAsync(function() {
		var child = currentEntity.createChild(&quot;children&quot;, {
			category:&quot;1&quot;,
			status:&quot;1&quot;,
			orgSeq:currentEntity.get(&quot;orgSeq&quot;),
			parentOrgId:currentEntity.get(&quot;id&quot;),
			parentOrgCode:currentEntity.get(&quot;orgCode&quot;),
			parentOrgName:currentEntity.get(&quot;orgName&quot;)
		});
		//alert(view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG.children&quot;).current.get(&quot;orgName&quot;));
		view.get(&quot;#orgTree&quot;).set(&quot;currentEntity&quot;,child);
	});
	view.get(&quot;#dialogStdOrgAdd&quot;).show();




</ClientEvent>
              <Property name="caption">添加下级机构</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
            </ToolBarButton>
            <ToolBarButton id="buttonAddDept">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能添加数据！&quot;);
	return;
}
		
		var orgLevel = currentEntity.get(&quot;orgLevel&quot;);
		var child=&quot;&quot;;
		if(orgLevel==&quot;1&quot;){
			view.get(&quot;#addDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;readOnly&quot;,true);
			view.get(&quot;#addDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;trigger&quot;,null);
		 	if(currentEntity.get(&quot;category&quot;)==0){
					currentNode.expandAsync(function() {
					 child = currentEntity.createChild(&quot;children&quot;, {
						category:&quot;0&quot;,
						status:&quot;1&quot;,
						orgLevel:currentEntity.get(&quot;orgLevel&quot;),
		    			orgSeq:currentEntity.get(&quot;orgSeq&quot;),
						parentOrgId:currentEntity.get(&quot;id&quot;),
						parentOrgCode:currentEntity.get(&quot;orgCode&quot;),
						parentOrgName:currentEntity.get(&quot;orgName&quot;),
						parentDeptId:currentEntity.get(&quot;id&quot;),
						parentDeptCode:currentEntity.get(&quot;orgCode&quot;),
						parentDeptName:currentEntity.get(&quot;orgName&quot;)
					 });
				    });
			}else{
					currentNode.expandAsync(function() {
					 child = currentEntity.createChild(&quot;children&quot;, {
						category:&quot;0&quot;,
						status:&quot;1&quot;,
						orgLevel:currentEntity.get(&quot;orgLevel&quot;),
		    			orgSeq:currentEntity.get(&quot;orgSeq&quot;),
						parentOrgId:currentEntity.get(&quot;id&quot;),
						parentOrgCode:currentEntity.get(&quot;orgCode&quot;),
						parentOrgName:currentEntity.get(&quot;orgName&quot;),
						parentDeptId:&quot;&quot;,
						parentDeptCode:&quot;&quot;,
						parentDeptName:&quot;&quot;
					 });
					});
			}
		}else{
				view.get(&quot;#addDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;readOnly&quot;,false);
				view.get(&quot;#addDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;trigger&quot;,&quot;depSingleDropDown&quot;);
					currentNode.expandAsync(function() {
					 child = currentEntity.createChild(&quot;children&quot;, {
						category:&quot;0&quot;,
						status:&quot;1&quot;,
						orgLevel:currentEntity.get(&quot;orgLevel&quot;),
		    			orgSeq:currentEntity.get(&quot;orgSeq&quot;),
						parentOrgId:currentEntity.get(&quot;id&quot;),
						parentOrgCode:currentEntity.get(&quot;orgCode&quot;),
						parentOrgName:currentEntity.get(&quot;orgName&quot;),
						parentDeptId:&quot;&quot;,
						parentDeptCode:&quot;&quot;,
						parentDeptName:&quot;&quot;
					});
				   });
		}
			//alert(&quot;!!!&quot;);
			view.get(&quot;#orgTree&quot;).set(&quot;currentEntity&quot;,child);

	view.get(&quot;#dialogStdDeptAdd&quot;).show();
</ClientEvent>
              <Property name="caption">添加本级机构部门</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
            </ToolBarButton>
            <ToolBarButton id="buttonUpdate">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var category=currentEntity.get(&quot;category&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能调整数据！&quot;);
	return;
}

var orgLevel = currentEntity.get(&quot;orgLevel&quot;);
	if(orgLevel==&quot;1&quot;){
		view.get(&quot;#updDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;readOnly&quot;,true);
		view.get(&quot;#updDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;trigger&quot;,null);
	}else{
		view.get(&quot;#updDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;readOnly&quot;,false);
		view.get(&quot;#updDeptForm&quot;).get(&quot;#parentDeptName&quot;).set(&quot;trigger&quot;,&quot;depSingleDropDown&quot;);
}
if(category==&quot;0&quot;){//部门
	view.get(&quot;#dialogStdDept&quot;).show();
}else{
	view.get(&quot;#dialogStdOrg&quot;).show();
}</ClientEvent>
              <Property name="caption">修改</Property>
              <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
            </ToolBarButton>
            <ToolBarButton id="buttonDelete">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var entity=currentNode.get(&quot;data&quot;);
var policyFlag=entity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能停用数据！&quot;);
	return;
}

dorado.MessageBox.confirm(&quot;确定停用？&quot;, function(){
	var category=entity.get(&quot;category&quot;);
	if(category==&quot;0&quot;){//部门
		var action=view.get(&quot;#delDeptAction&quot;);
		action.set(&quot;parameter&quot;,entity.get(&quot;orgCode&quot;)).execute(function(result){
			if(result==&quot;ok&quot;){
				view.get(&quot;#dataSetOrg&quot;).get(&quot;dataType&quot;).set(&quot;acceptValidationState&quot;,&quot;error&quot;);
				entity.set(&quot;status&quot;,&quot;0&quot;);
				view.get(&quot;#saveOrgs&quot;).execute();
				view.get(&quot;#dataSetOrg&quot;).get(&quot;dataType&quot;).set(&quot;acceptValidationState&quot;,&quot;warn&quot;);
			}else if(result==&quot;org&quot;){
				dorado.MessageBox.alert(&quot;操作失败，该部门下存在状态为有效的部门，请先将部门停用，再尝试执行此操作！&quot;);
			}else if(result==&quot;post&quot;){
				dorado.MessageBox.alert(&quot;操作失败，该部门下存在状态为有效的岗位，请先将岗位停用，再尝试执行此操作！&quot;);
			}else if(result==&quot;user&quot;){
				dorado.MessageBox.alert(&quot;操作失败，该部门下存在状态为有效的用户，请先将用户停用，再尝试执行此操作！&quot;);
			}
		});
	}else{
		var action=view.get(&quot;#delOrgAction&quot;);
		action.set(&quot;parameter&quot;,entity.get(&quot;orgCode&quot;)).execute(function(result){
			if(result==&quot;true&quot;){
				view.get(&quot;#dataSetOrg&quot;).get(&quot;dataType&quot;).set(&quot;acceptValidationState&quot;,&quot;error&quot;);
				entity.set(&quot;status&quot;,&quot;0&quot;);
				view.get(&quot;#saveOrgs&quot;).execute();
				view.get(&quot;#dataSetOrg&quot;).get(&quot;dataType&quot;).set(&quot;acceptValidationState&quot;,&quot;warn&quot;);
			}else{
				dorado.MessageBox.alert(&quot;操作失败，该机构下存在状态为有效的机构或部门，请先将机构或部门停用，再尝试执行此操作！&quot;);
			}
		});
	}
});</ClientEvent>
              <Property name="caption">停用</Property>
              <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
            </ToolBarButton>
            <ToolBarButton id="buttonAddRole">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var orgId=currentEntity.get(&quot;id&quot;);
var category=currentEntity.get(&quot;category&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能添加角色！&quot;);
	return;
}

if(category==&quot;1&quot;){
	dorado.MessageBox.alert(&quot;请选择类型为部门的节点！&quot;);
}else{
	view.get(&quot;#dataSetOrgRole&quot;).set(&quot;parameter&quot;,orgId).flushAsync();
	view.get(&quot;#addDialogSysOrgRole&quot;).show();
}</ClientEvent>
              <Property name="caption">添加角色</Property>
              <Property name="icon">>icons/user_orange.png</Property>
            </ToolBarButton>
            <ToolBarButton id="addBusinessButton">
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能添加数据！&quot;);
}
var orgId = currentEntity.get(&quot;id&quot;);
var objBusilineType = &quot;1&quot;;
view.get(&quot;#dataSetOrgBusiness&quot;).set(&quot;parameter&quot;,{
	objId:orgId,
objBusilineType:objBusilineType
}).flushAsync();
view.get(&quot;#addDialogSysOrgBusiness&quot;).show();</ClientEvent>
              <Property name="caption">维护业务条线</Property>
              <Property name="icon">>icons/layers.png</Property>
              <Property name="ignored">${sys.getString(&quot;mdf.sysuser.bizline.pattern&quot;) ne &quot;1&quot;}</Property>
            </ToolBarButton>
          </ToolBar>
          <Container>
            <DataTreeGrid id="orgTree">
              <ClientEvent name="onCurrentChange">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);&#xD;
if(null!=currentNode){&#xD;
var currentEntity = currentNode.get(&quot;data&quot;);&#xD;
&#xD;
var category=currentEntity.get(&quot;category&quot;);&#xD;
var cardBook=view.get(&quot;#cardBookDisp&quot;);&#xD;
if(category==&quot;1&quot;){//机构&#xD;
	cardBook.set(&quot;currentIndex&quot;, 0);&#xD;
}else if(category==&quot;0&quot;){//部门&#xD;
	cardBook.set(&quot;currentIndex&quot;, 1);&#xD;
}&#xD;
}</ClientEvent>
              <ClientEvent name="onNodeCheckedChange">if(!arg.node.get('checked')){&#xD;
	arg.node.set('checked',true);&#xD;
}</ClientEvent>
              <ClientEvent name="onNodeAttached">var node = arg.node;&#xD;
var entity = node.get('data');&#xD;
//alert(&quot;flag---&quot;+entity.get('policyFlag'));&#xD;
if(entity.get('policyFlag')){&#xD;
	node.set('checkable',true);	&#xD;
	node.set('checked',true);&#xD;
	&#xD;
}&#xD;
arg.processDefault=true;</ClientEvent>
              <Property name="dataSet">dataSetOrg</Property>
              <Property name="treeColumn">orgCode</Property>
              <Property name="currentNodeDataPath">CURRENT_ORG</Property>
              <Property name="hideMode">display</Property>
              <BindingConfigs>
                <BindingConfig>
                  <Property name="labelProperty">orgCode</Property>
                  <Property name="recursive">true</Property>
                  <Property name="childrenProperty">children</Property>
                  <Property name="expandedIcon">>icons/chart_organisation.png</Property>
                  <Property name="icon">>icons/chart_organisation.png</Property>
                  <Property name="expandLevel">1</Property>
                  <Property name="autoCheckChildren">true</Property>
                </BindingConfig>
              </BindingConfigs>
              <Columns>
                <DataColumn>
                  <Property name="name">orgCode</Property>
                  <Property name="property">orgCode</Property>
                  <Property name="readOnly">true</Property>
                  <Editor/>
                </DataColumn>
                <DataColumn>
                  <Property name="name">orgName</Property>
                  <Property name="property">orgName</Property>
                  <Property name="readOnly">true</Property>
                  <Editor/>
                </DataColumn>
                <DataColumn>
                  <Property name="name">category</Property>
                  <Property name="property">category</Property>
                  <Property name="readOnly">true</Property>
                  <Editor/>
                </DataColumn>
                <DataColumn>
                  <Property name="name">status</Property>
                  <Property name="property">status</Property>
                  <Property name="readOnly">true</Property>
                  <Editor/>
                </DataColumn>
              </Columns>
            </DataTreeGrid>
          </Container>
        </Container>
      </MainControl>
      <SideControl>
        <Container>
          <CardBook id="cardBookDisp">
            <Container>
              <FieldSet layoutConstraint="top">
                <Property name="caption">机构信息</Property>
                <Buttons/>
                <Children>
                  <AutoForm id="orgDispForm">
                    <Property name="dataSet">dataSetOrg</Property>
                    <Property name="dataPath">!CURRENT_ORG</Property>
                    <Property name="readOnly">true</Property>
                    <Property name="cols">*</Property>
                    <Property name="dataType">OrgInfo</Property>
                    <Property name="labelWidth">120</Property>
                    <AutoFormElement>
                      <Property name="name">orgCode</Property>
                      <Property name="property">orgCode</Property>
                      <Property name="label">机构编码</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgName</Property>
                      <Property name="property">orgName</Property>
                      <Property name="label">机构名称</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgBrief</Property>
                      <Property name="property">orgBrief</Property>
                      <Property name="label">机构简称</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgLevel</Property>
                      <Property name="property">orgLevel</Property>
                      <Property name="label">机构级别</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">status</Property>
                      <Property name="property">status</Property>
                      <Property name="label">状态</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">isRiskDept</Property>
                      <Property name="property">isRiskDept</Property>
                      <Property name="label">是否业务管理部门</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">country</Property>
                      <Property name="property">country</Property>
                      <Property name="label">国家或地区</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">citycode</Property>
                      <Property name="property">citycode</Property>
                      <Property name="label">城市</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">email</Property>
                      <Property name="property">email</Property>
                      <Property name="label">联系邮箱</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">officeAddr</Property>
                      <Property name="property">officeAddr</Property>
                      <Property name="label">办公地址</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">post</Property>
                      <Property name="property">post</Property>
                      <Property name="label">邮政编码</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">contact</Property>
                      <Property name="property">contact</Property>
                      <Property name="label">联系人</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">tel</Property>
                      <Property name="property">tel</Property>
                      <Property name="label">联系电话</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">remark</Property>
                      <Property name="property">remark</Property>
                      <Property name="label">备注</Property>
                      <Property name="labelWidth">120</Property>
                      <Editor>
                        <TextArea>
                          <Property name="height">60</Property>
                        </TextArea>
                      </Editor>
                    </AutoFormElement>
                  </AutoForm>
                </Children>
              </FieldSet>
            </Container>
            <Container>
              <FieldSet layoutConstraint="top">
                <Property name="caption">部门信息</Property>
                <Buttons/>
                <Children>
                  <AutoForm id="deptDispForm">
                    <Property name="dataSet">dataSetOrg</Property>
                    <Property name="dataPath">!CURRENT_ORG</Property>
                    <Property name="readOnly">true</Property>
                    <Property name="cols">*</Property>
                    <Property name="dataType">OrgInfo</Property>
                    <Property name="labelWidth">120</Property>
                    <AutoFormElement>
                      <Property name="name">orgCode</Property>
                      <Property name="property">orgCode</Property>
                      <Property name="label">部门编码</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgName</Property>
                      <Property name="property">orgName</Property>
                      <Property name="label">部门名称</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgBrief</Property>
                      <Property name="property">orgBrief</Property>
                      <Property name="label">部门简称</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">orgLevel</Property>
                      <Property name="property">orgLevel</Property>
                      <Property name="label">部门级别</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">status</Property>
                      <Property name="property">status</Property>
                      <Property name="label">状态</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">isRiskDept</Property>
                      <Property name="property">isRiskDept</Property>
                      <Property name="label">是否业务管理部门</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">parentOrgName</Property>
                      <Property name="property">parentOrgName</Property>
                      <Property name="label">上级部门</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">country</Property>
                      <Property name="property">country</Property>
                      <Property name="label">国家或地区</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">citycode</Property>
                      <Property name="property">citycode</Property>
                      <Property name="label">城市</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">email</Property>
                      <Property name="property">email</Property>
                      <Property name="label">联系邮箱</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">officeAddr</Property>
                      <Property name="property">officeAddr</Property>
                      <Property name="label">办公地址</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">post</Property>
                      <Property name="property">post</Property>
                      <Property name="label">邮政编码</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">contact</Property>
                      <Property name="property">contact</Property>
                      <Property name="label">联系人</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">tel</Property>
                      <Property name="property">tel</Property>
                      <Property name="label">联系电话</Property>
                      <Editor/>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">remark</Property>
                      <Property name="property">remark</Property>
                      <Property name="label">备注</Property>
                      <Property name="labelWidth">120</Property>
                      <Editor>
                        <TextArea>
                          <Property name="height">60</Property>
                        </TextArea>
                      </Editor>
                    </AutoFormElement>
                    <AutoFormElement>
                      <Property name="name">deptRoles</Property>
                      <Property name="property">deptRoles</Property>
                      <Editor>
                        <TextArea/>
                      </Editor>
                    </AutoFormElement>
                  </AutoForm>
                </Children>
              </FieldSet>
            </Container>
          </CardBook>
        </Container>
      </SideControl>
    </SplitPanel>
    <Dialog id="dialogStdOrg">
      <ClientEvent name="onClose">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG.children&quot;).cancel();
view.get(&quot;#dialogStdOrg&quot;).hide();
	  </ClientEvent>
      <Property name="width">80%</Property>
      <Property name="center">true</Property>
      <Property name="caption">机构信息</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog=this.get(&quot;#dialogStdOrg&quot;);

view.get(&quot;#saveOrgs&quot;).execute(function(result){
	dialog.hide();
});
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG.children&quot;).cancel();
view.get(&quot;#dialogStdOrg&quot;).hide();
	  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="updOrgForm">
          <Property name="dataSet">dataSetOrg</Property>
          <Property name="dataPath">!CURRENT_ORG</Property>
          <Property name="dataType">OrgInfo</Property>
          <Property name="labelAlign">right</Property>
          <Property name="labelWidth">110</Property>
          <AutoFormElement>
            <Property name="name">orgCode</Property>
            <Property name="property">orgCode</Property>
            <Property name="readOnly">true</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgName</Property>
            <Property name="property">orgName</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgBrief</Property>
            <Property name="property">orgBrief</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgLevel</Property>
            <Property name="property">orgLevel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">parentOrgName</Property>
            <Property name="property">parentOrgName</Property>
            <Property name="trigger">orgSingleDropDown</Property>
            <Property name="userData">
              <Entity>
                <Property name="code">parentOrgCode</Property>
              </Entity>
            </Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">status</Property>
            <Property name="property">status</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">country</Property>
            <Property name="property">country</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">citycode</Property>
            <Property name="property">citycode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">email</Property>
            <Property name="property">email</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">officeAddr</Property>
            <Property name="property">officeAddr</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">post</Property>
            <Property name="property">post</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">tel</Property>
            <Property name="property">tel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">contact</Property>
            <Property name="property">contact</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">seq</Property>
            <Property name="property">seq</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement layoutConstraint="colSpan:2">
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor>
              <TextArea>
                <Property name="height">60</Property>
              </TextArea>
            </Editor>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogStdDept">
      <ClientEvent name="onClose">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG.children&quot;).cancel();
view.get(&quot;#dialogStdDept&quot;).hide();
	  </ClientEvent>
      <Property name="width">80%</Property>
      <Property name="center">true</Property>
      <Property name="caption">部门信息</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog=this.get(&quot;#dialogStdDept&quot;);

view.get(&quot;#saveOrgs&quot;).execute(function(result){
	//var orgName=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgName&quot;);
	//var orgCode=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgCode&quot;);
	//var category=&quot;1&quot;;
	//if((orgName==&quot;&quot; || orgName==undefined) &amp;&amp; (orgCode==&quot;&quot; || orgCode==undefined)){
		//var param={&quot;parentOrgId&quot;:&quot;0&quot;,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	//}else{
		//var param={&quot;orgCode&quot;:orgCode,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	//}
	//view.get(&quot;#dataSetOrg&quot;).set(&quot;parameter&quot;,param).flushAsync();
	dialog.hide();
});
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG.children&quot;).cancel();
view.get(&quot;#dialogStdDept&quot;).hide();
	  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="updDeptForm">
          <Property name="dataSet">dataSetOrg</Property>
          <Property name="dataPath">!CURRENT_ORG</Property>
          <Property name="dataType">OrgInfo</Property>
          <Property name="labelAlign">right</Property>
          <Property name="labelWidth">120</Property>
          <AutoFormElement>
            <Property name="name">orgCode</Property>
            <Property name="property">orgCode</Property>
            <Property name="readOnly">true</Property>
            <Property name="label">部门编码</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgName</Property>
            <Property name="property">orgName</Property>
            <Property name="label">部门名称</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgBrief</Property>
            <Property name="property">orgBrief</Property>
            <Property name="label">部门简称</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgLevel</Property>
            <Property name="property">orgLevel</Property>
            <Property name="label">部门级别</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">parentDeptName</Property>
            <Property name="property">parentDeptName</Property>
            <Property name="userData">
              <Entity>
                <Property name="code">parentDeptCode</Property>
              </Entity>
            </Property>
            <Property name="trigger">depSingleDropDown</Property>
            <Property name="label">上级部门</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">status</Property>
            <Property name="property">status</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">isRiskDept</Property>
            <Property name="property">isRiskDept</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">country</Property>
            <Property name="property">country</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">citycode</Property>
            <Property name="property">citycode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">email</Property>
            <Property name="property">email</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">officeAddr</Property>
            <Property name="property">officeAddr</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">post</Property>
            <Property name="property">post</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">tel</Property>
            <Property name="property">tel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">contact</Property>
            <Property name="property">contact</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">seq</Property>
            <Property name="property">seq</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement layoutConstraint="colSpan:2">
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor>
              <TextArea>
                <Property name="height">60</Property>
              </TextArea>
            </Editor>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogStdOrgAdd">
      <ClientEvent name="onClose">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG&quot;).cancel();
view.get(&quot;#dialogStdOrgAdd&quot;).hide();
	  </ClientEvent>
      <Property name="width">80%</Property>
      <Property name="center">true</Property>
      <Property name="caption">机构信息</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog=this.get(&quot;#dialogStdOrgAdd&quot;);

view.get(&quot;#saveOrgs&quot;).execute(function(result){
	dialog.hide();
});
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG&quot;).cancel();
view.get(&quot;#dialogStdOrgAdd&quot;).hide();
	  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="addOrgForm">
          <Property name="dataSet">dataSetOrg</Property>
          <Property name="dataPath">!CURRENT_ORG</Property>
          <Property name="dataType">OrgInfo</Property>
          <Property name="labelAlign">right</Property>
          <Property name="labelWidth">110</Property>
          <AutoFormElement>
            <Property name="name">orgCode</Property>
            <Property name="property">orgCode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgName</Property>
            <Property name="property">orgName</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgBrief</Property>
            <Property name="property">orgBrief</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgLevel</Property>
            <Property name="property">orgLevel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">status</Property>
            <Property name="property">status</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">country</Property>
            <Property name="property">country</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">citycode</Property>
            <Property name="property">citycode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">email</Property>
            <Property name="property">email</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">officeAddr</Property>
            <Property name="property">officeAddr</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">post</Property>
            <Property name="property">post</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">tel</Property>
            <Property name="property">tel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">contact</Property>
            <Property name="property">contact</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">seq</Property>
            <Property name="property">seq</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement layoutConstraint="colSpan:2">
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor>
              <TextArea>
                <Property name="height">60</Property>
              </TextArea>
            </Editor>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogStdDeptAdd">
      <ClientEvent name="onClose">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG&quot;).cancel();
view.get(&quot;#dialogStdDeptAdd&quot;).hide();
	  </ClientEvent>
      <Property name="width">80%</Property>
      <Property name="center">true</Property>
      <Property name="caption">部门信息</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog=this.get(&quot;#dialogStdDeptAdd&quot;);
view.get(&quot;#saveOrgs&quot;).execute(function(result){
	//var orgName=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgName&quot;);
	//var orgCode=view.get(&quot;#dataSetQuery&quot;).getData(&quot;#&quot;).get(&quot;orgCode&quot;);
	
	//var category=&quot;1&quot;;
	//if((orgName==&quot;&quot; || orgName==undefined) &amp;&amp; (orgCode==&quot;&quot; || orgCode==undefined)){
		//var param={&quot;parentOrgId&quot;:&quot;0&quot;,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	//}else{
		//var param={&quot;orgCode&quot;:orgCode,&quot;category&quot;:category,&quot;orgName&quot;:orgName};
	//}
	//view.get(&quot;#dataSetOrg&quot;).set(&quot;parameter&quot;,param).flushAsync();
	dialog.hide();
});

</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrg&quot;).getData(&quot;!CURRENT_ORG&quot;).cancel();
view.get(&quot;#dialogStdDeptAdd&quot;).hide();
	  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm id="addDeptForm">
          <Property name="dataSet">dataSetOrg</Property>
          <Property name="dataPath">!CURRENT_ORG</Property>
          <Property name="dataType">OrgInfo</Property>
          <Property name="labelAlign">right</Property>
          <Property name="labelWidth">120</Property>
          <Property name="tags">addDeptForm</Property>
          <AutoFormElement>
            <Property name="name">orgCode</Property>
            <Property name="property">orgCode</Property>
            <Property name="label">部门编码</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgName</Property>
            <Property name="property">orgName</Property>
            <Property name="label">部门名称</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgBrief</Property>
            <Property name="property">orgBrief</Property>
            <Property name="label">部门简称</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">status</Property>
            <Property name="property">status</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgLevel</Property>
            <Property name="property">orgLevel</Property>
            <Property name="readOnly">true</Property>
            <Property name="label">部门级别</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement id="parentDeptName">
            <Property name="name">parentDeptName</Property>
            <Property name="property">parentDeptName</Property>
            <Property name="userData">
              <Entity>
                <Property name="code">parentDeptCode</Property>
              </Entity>
            </Property>
            <Property name="label">上级部门</Property>
            <Property name="trigger">depSingleDropDown</Property>
            <Editor>
              <TextEditor id="parentDeptNameText">
                <Property name="trigger">depSingleDropDown</Property>
                <Property name="tags">parentDeptNameText</Property>
              </TextEditor>
            </Editor>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">isRiskDept</Property>
            <Property name="property">isRiskDept</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">country</Property>
            <Property name="property">country</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">citycode</Property>
            <Property name="property">citycode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">email</Property>
            <Property name="property">email</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">officeAddr</Property>
            <Property name="property">officeAddr</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">post</Property>
            <Property name="property">post</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">tel</Property>
            <Property name="property">tel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">contact</Property>
            <Property name="property">contact</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">seq</Property>
            <Property name="property">seq</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement layoutConstraint="colSpan:2">
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor>
              <TextArea>
                <Property name="height">60</Property>
              </TextArea>
            </Editor>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogStdOrgShow">
      <Property name="width">70%</Property>
      <Property name="center">true</Property>
      <Property name="caption">机构信息</Property>
      <Property name="maximized">false</Property>
      <Property name="maximizeable">true</Property>
      <Property name="height">65%</Property>
      <Property name="modal">true</Property>
      <Buttons>
        <Button id="colseDealButton">
          <ClientEvent name="onClick">      
          
         // view.get(&quot;#dataSetRegOuter&quot;).getData().cancel();
		view.get(&quot;#dialogStdOrgShow&quot;).hide();
              	
		  </ClientEvent>
          <Property name="caption">关闭</Property>
          <Property name="icon">url(>skin>common/icons.gif) -40px -0px</Property>
        </Button>
      </Buttons>
      <Children>
        <AutoForm>
          <Property name="dataSet">dataSetOrg</Property>
          <Property name="dataPath">!CURRENT_ORG.#children</Property>
          <Property name="dataType">OrgInfo</Property>
          <Property name="readOnly">true</Property>
          <Property name="labelAlign">right</Property>
          <AutoFormElement>
            <Property name="name">orgCode</Property>
            <Property name="property">orgCode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgName</Property>
            <Property name="property">orgName</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgBrief</Property>
            <Property name="property">orgBrief</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">orgLevel</Property>
            <Property name="property">orgLevel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">parentOrgName</Property>
            <Property name="property">parentOrgName</Property>
            <Property name="trigger">dropdownOrg</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">category</Property>
            <Property name="property">category</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">pathName</Property>
            <Property name="property">pathName</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">status</Property>
            <Property name="property">status</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">isRiskDept</Property>
            <Property name="property">isRiskDept</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">country</Property>
            <Property name="property">country</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">citycode</Property>
            <Property name="property">citycode</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">email</Property>
            <Property name="property">email</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">officeAddr</Property>
            <Property name="property">officeAddr</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">post</Property>
            <Property name="property">post</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">tel</Property>
            <Property name="property">tel</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">contact</Property>
            <Property name="property">contact</Property>
            <Editor/>
          </AutoFormElement>
          <AutoFormElement>
            <Property name="name">remark</Property>
            <Property name="property">remark</Property>
            <Editor/>
          </AutoFormElement>
        </AutoForm>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="addDialogSysOrgRole">
      <ClientEvent name="onClose">view.get(&quot;#dataSetOrgRole&quot;).getData().cancel();
view.get(&quot;#addDialogSysOrgRole&quot;).hide();
</ClientEvent>
      <Property name="caption">添加角色</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">80%</Property>
      <Property name="height">90%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var action = view.get(&quot;#saveOrgRoleAction&quot;);
var dialog=view.get(&quot;#addDialogSysOrgRole&quot;);
action.execute();

var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
var currentEntity = currentNode.get(&quot;data&quot;);
var orgCode = currentEntity.get(&quot;orgCode&quot;);
//取到当前机构orgCODE ， ajxa。
view.get(&quot;#getRolesByDeptCode&quot;).set(&quot;parameter&quot;, orgCode).execute(function(result) {
		currentEntity.set(&quot;deptRoles&quot;,result); 
});


dialog.hide();
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrgRole&quot;).getData().cancel();
view.get(&quot;#addDialogSysOrgRole&quot;).hide();
              	
		  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <Container>
          <ToolBar id="addOrgRole">
            <ToolBarButton>
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
var orgId=currentNode.get(&quot;data&quot;).get(&quot;id&quot;);
var orgLevel=currentNode.get(&quot;data&quot;).get(&quot;orgLevel&quot;);
view.get(&quot;#dataSetRole&quot;).set(&quot;parameter&quot;,{orgId:orgId,orgLevel:orgLevel,status:&quot;1&quot;}).flushAsync();
view.get(&quot;#dialogRole&quot;).show();
</ClientEvent>
              <Property name="caption">添加</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
            </ToolBarButton>
            <ToolBarButton>
              <ClientEvent name="onClick">var entitys = view.get(&quot;#dataSetOrgRole&quot;).getData();
var selection = view.get(&quot;#orgRoleGrid&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
			jQuery.each(selection,function(i,item){
			entitys.remove(item);
		});
}</ClientEvent>
              <Property name="caption">删除</Property>
              <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
            </ToolBarButton>
          </ToolBar>
          <DataGrid id="orgRoleGrid">
            <Property name="dataSet">dataSetOrgRole</Property>
            <Property name="selectionMode">multiRows</Property>
            <Property name="readOnly">true</Property>
            <RowNumColumn/>
            <RowSelectorColumn/>
            <DataColumn>
              <Property name="name">roleName</Property>
              <Property name="property">roleName</Property>
              <Editor/>
            </DataColumn>
            <DataColumn>
              <Property name="name">roleType</Property>
              <Property name="property">roleType</Property>
              <Editor/>
            </DataColumn>
            <DataColumn>
              <Property name="property">status</Property>
              <Property name="name">status</Property>
              <Editor/>
            </DataColumn>
          </DataGrid>
        </Container>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogRole">
      <Property name="caption">角色选择</Property>
      <Property name="center">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">70%</Property>
      <Property name="height">90%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog = view.get(&quot;#dialogRole&quot;);
var entitys = view.get(&quot;#dataSetOrgRole&quot;).getData();
var selection = view.get(&quot;#roleMultiList&quot;).get(&quot;selection&quot;);
var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
var orgId=currentNode.get(&quot;data&quot;).get(&quot;id&quot;);
var orgCode=currentNode.get(&quot;data&quot;).get(&quot;orgCode&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
	jQuery.each(selection,function(i,item){
		//忽略已经存在的按钮
		var bool = true;
		entitys.each(function(entity){
			if(item.get(&quot;id&quot;) == entity.get(&quot;roleId&quot;)){
				bool = false;
				return true;
			}
		});
		if(bool){
			var entity = {
				roleId:item.get(&quot;id&quot;),
				orgId:orgId,
				orgCode:orgCode,
				roleName:item.get(&quot;roleName&quot;),
				roleType:item.get(&quot;roleType&quot;),
				status:item.get(&quot;status&quot;)
			};
			entitys.insert(entity);
		}
	});
	dialog.hide();
}</ClientEvent>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
          <Property name="caption">确定</Property>
        </Button>
      </Buttons>
      <Children>
        <Container id="multiList">
          <Property name="hideMode">display</Property>
          <Property name="visible">true</Property>
          <FieldSet>
            <Property name="collapsed">true</Property>
            <Property name="buttonAlign">right</Property>
            <Property name="caption">查询</Property>
            <Buttons/>
            <Children>
              <AutoForm>
                <Property name="dataSet">dataSetRoleQuery</Property>
                <Property name="cols">*,*</Property>
                <Property name="labelAlign">right</Property>
                <AutoFormElement>
                  <Property name="name">roleName</Property>
                  <Property name="property">roleName</Property>
                  <Property name="showLabel">true</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor/>
                </AutoFormElement>
                <Button id="roleMultiListSearch">
                  <ClientEvent name="onClick">var selection = view.get(&quot;#dataGridSysPost&quot;).get(&quot;selection&quot;);
var postId=selection[0].get(&quot;id&quot;);
var orgLevel=selection[0].get(&quot;orgLevel&quot;);
var roleName=view.get(&quot;#dataSetRoleQuery&quot;).getData(&quot;#&quot;).get(&quot;roleName&quot;);
view.get(&quot;#dataSetUser&quot;).set(&quot;parameter&quot;, {&quot;postId&quot;:postId,&quot;roleName&quot;:roleName,&quot;orgLevel&quot;:orgLevel}).flushAsync();
</ClientEvent>
                  <Property name="caption">查询</Property>
                </Button>
              </AutoForm>
            </Children>
          </FieldSet>
          <DataGrid id="roleMultiList">
            <Property name="dataSet">dataSetRole</Property>
            <Property name="showHeader">true</Property>
            <Property name="selectionMode">multiRows</Property>
            <Property name="rowSelectionProperty">selectFlag</Property>
            <Property name="highlightCurrentRow">false</Property>
            <RowNumColumn/>
            <RowSelectorColumn/>
            <DataColumn>
              <Property name="name">roleName</Property>
              <Property name="property">roleName</Property>
              <Property name="readOnly">true</Property>
              <Editor/>
            </DataColumn>
            <DataColumn>
              <Property name="name">roleType</Property>
              <Property name="property">roleType</Property>
              <Editor/>
            </DataColumn>
          </DataGrid>
          <ToolBar id="multiListPilot" layoutConstraint="bottom">
            <Property name="hideMode">display</Property>
            <DataPilot>
              <Property name="itemCodes">pages</Property>
              <Property name="dataSet">dataSetRole</Property>
            </DataPilot>
          </ToolBar>
        </Container>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="addDialogSysOrgBusiness">
      <ClientEvent name="onClose">view.get(&quot;#dataTypeSysUserPost&quot;).getData().cancel();
view.get(&quot;#addDialogSysPostRole&quot;).hide();</ClientEvent>
      <Property name="caption">维护业务条线</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">80%</Property>
      <Property name="height">90%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var action = view.get(&quot;#saveOrgBusinessAction&quot;);
var dialog=view.get(&quot;#addDialogSysOrgBusiness&quot;);
action.execute(function(){
	dialog.hide();
});
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetOrgBusiness&quot;).getData().cancel();
view.get(&quot;#addDialogSysOrgBusiness&quot;).hide();
              	
		  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <Container>
          <Property name="contentOverflowY">auto</Property>
          <ToolBar id="addOrgBusiness">
            <ToolBarButton>
              <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);
if (!currentNode) {
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);
}
var currentEntity = currentNode.get(&quot;data&quot;);
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);
if(!policyFlag){
	dorado.MessageBox.alert(&quot;非权限节点不能添加数据！&quot;);
}
view.get(&quot;#dataSetBizLine&quot;).set(&quot;parameter&quot;,{parentBusilineId: &quot;0&quot;}).flushAsync(function(){
  	view.get(&quot;#addBizLineDialog&quot;).show();
});</ClientEvent>
              <Property name="caption">添加</Property>
              <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
            </ToolBarButton>
            <ToolBarButton>
              <ClientEvent name="onClick">var entitys = view.get(&quot;#dataSetOrgBusiness&quot;).getData();
var selection = view.get(&quot;#orgBusinessGrid&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
			jQuery.each(selection,function(i,item){
			entitys.remove(item);
		});
}</ClientEvent>
              <Property name="caption">删除</Property>
              <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
            </ToolBarButton>
          </ToolBar>
          <DataGrid id="orgBusinessGrid">
            <Property name="dataSet">dataSetOrgBusiness</Property>
            <Property name="selectionMode">multiRows</Property>
            <Property name="readOnly">true</Property>
            <RowNumColumn/>
            <RowSelectorColumn/>
            <DataColumn name="busilineName">
              <Property name="property">busilineName</Property>
            </DataColumn>
          </DataGrid>
        </Container>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="addBizLineDialog">
      <Property name="center">true</Property>
      <Property name="caption">选择业务条线</Property>
      <Property name="modal">true</Property>
      <Property name="width">70%</Property>
      <Property name="height">80%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var currentNode = view.get(&quot;#orgTree&quot;).get(&quot;currentNode&quot;);&#xD;
if (!currentNode) {&#xD;
	throw new dorado.Exception(&quot;请先点中一个树节点！&quot;);&#xD;
}&#xD;
var currentEntity = currentNode.get(&quot;data&quot;);&#xD;
var policyFlag=currentEntity.get(&quot;policyFlag&quot;);&#xD;
if(!policyFlag){&#xD;
	dorado.MessageBox.alert(&quot;非权限节点不能添加数据！&quot;);&#xD;
}&#xD;
var dimenDateList=view.get('#dataSetOrgBusiness').getData();&#xD;
var nodes=view.get('#busiLineTree').getCheckedNodes();&#xD;
jQuery.each(nodes,function(i,node){&#xD;
	var isexists=false;&#xD;
	var bizlineId=node.get('data').get('id');&#xD;
	var bizlineName=node.get('data').get('busilineName');&#xD;
	dimenDateList.each(function(entity){&#xD;
		var id=entity.get('busilineId');&#xD;
		if(bizlineId==id){&#xD;
			isexists=true;&#xD;
		}&#xD;
	});&#xD;
	if(!isexists){&#xD;
		var entity={&#xD;
			busilineId:bizlineId,&#xD;
			busilineName:bizlineName,&#xD;
			objBusilineType:'1',&#xD;
			objId:currentEntity.get('id'),&#xD;
			objCode:currentEntity.get('orgCode')&#xD;
		}&#xD;
		dimenDateList.insert(entity);&#xD;
	}&#xD;
});&#xD;
view.get(&quot;#addBizLineDialog&quot;).hide();&#xD;
&#xD;
</ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#addBizLineDialog&quot;).hide();&#xD;
</ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <Container>
          <DataTreeGrid id="busiLineTree">
            <Property name="dataSet">dataSetBizLine</Property>
            <Property name="currentNodeDataPath">CURRENT_NODE</Property>
            <Property name="treeColumn">busilineCode</Property>
            <Property name="readOnly">true</Property>
            <Property name="selectionMode">multiRows</Property>
            <BindingConfigs>
              <BindingConfig>
                <Property name="childrenProperty">children</Property>
                <Property name="labelProperty">busilineCode</Property>
                <Property name="recursive">true</Property>
                <Property name="expandedIcon">>icons/layers.png</Property>
                <Property name="icon">>icons/layers.png</Property>
                <Property name="checkable">true</Property>
                <Property name="autoCheckChildren">false</Property>
              </BindingConfig>
            </BindingConfigs>
            <Columns>
              <DataColumn name="busilineCode" property="busilineCode">
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="busilineName" property="busilineName">
                <Property name="readOnly">true</Property>
              </DataColumn>
              <DataColumn name="busilineDesc" property="busilineDesc">
                <Property name="readOnly">true</Property>
              </DataColumn>
            </Columns>
          </DataTreeGrid>
        </Container>
      </Children>
      <Tools/>
    </Dialog>
    <CustomDropDown id="depSingleDropDown">
      <ClientEvent name="onClose">if(arg.selectedValue){
	var entity = new dorado.Entity();
	entity.fromJSON(JSON.parse(arg.selectedValue));
	var dataSet=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;dataSet&quot;);
	var name=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;property&quot;);
	var code=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;userData.code&quot;);
	if(entity.get('category')=='0'){
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(code,entity.get(&quot;orgCode&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(name,entity.get(&quot;orgName&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentDeptId&quot;,entity.get(&quot;id&quot;));	
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgCode&quot;,entity.get(&quot;orgCode&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgName&quot;,entity.get(&quot;orgName&quot;));		
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgId&quot;,entity.get(&quot;id&quot;));
	}else if(entity.get('category')=='1'){
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(code,entity.get(&quot;orgCode&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(name,entity.get(&quot;orgName&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentDeptId&quot;,entity.get(&quot;id&quot;));	
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgCode&quot;,entity.get(&quot;orgCode&quot;));
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgName&quot;,entity.get(&quot;orgName&quot;));		
		dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgId&quot;,entity.get(&quot;id&quot;));		
	}
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;orgSeq&quot;,entity.get(&quot;orgSeq&quot;));
	dataSet.notifyObservers();
}
arg.selectedValue = undefined;
return false;</ClientEvent>
      <Property name="height">300</Property>
      <Property name="autoOpen">true</Property>
      <Property name="editable">false</Property>
      <IFrame>
        <Property name="path">${request.contextPath}/com/innofi/module/commons/view/dropdown/OrgSelect.d?selectType=singleTree&amp;dropdown=depSingleDropDown</Property>
      </IFrame>
    </CustomDropDown>
    <CustomDropDown id="orgSingleDropDown">
      <ClientEvent name="onClose">if(arg.selectedValue){
	var entity = new dorado.Entity();
	entity.fromJSON(JSON.parse(arg.selectedValue));
	var dataSet=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;dataSet&quot;);
	var name=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;property&quot;);
	var code=self.get(&quot;editor&quot;).get(&quot;parent&quot;).get(&quot;userData.code&quot;);
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(code,entity.get(&quot;orgCode&quot;));
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(name,entity.get(&quot;orgName&quot;));
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentDeptId&quot;,entity.get(&quot;id&quot;));	
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgCode&quot;,entity.get(&quot;orgCode&quot;));
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgName&quot;,entity.get(&quot;orgName&quot;));		
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;parentOrgId&quot;,entity.get(&quot;id&quot;));		
	dataSet.getData(&quot;!CURRENT_ORG&quot;).set(&quot;orgSeq&quot;,entity.get(&quot;orgSeq&quot;));
	dataSet.notifyObservers();
}
arg.selectedValue = undefined;
return false;</ClientEvent>
      <Property name="width">260</Property>
      <Property name="height">300</Property>
      <Property name="editable">false</Property>
      <Property name="autoOpen">true</Property>
      <IFrame>
        <Property name="path">${request.contextPath}/com/innofi/module/commons/view/dropdown/OrgSelect.d?selectType=singleTree&amp;dropdown=orgSingleDropDown&amp;category=1</Property>
      </IFrame>
    </CustomDropDown>
    <AjaxAction id="checkCode">
      <Property name="service">sysOrgInfoAction#checkOrgCode</Property>
    </AjaxAction>
    <AjaxAction id="delOrgAction">
      <Property name="service">sysOrgInfoAction#invalidOrg</Property>
    </AjaxAction>
    <AjaxAction id="delDeptAction">
      <Property name="service">sysOrgInfoAction#invalidDep</Property>
    </AjaxAction>
    <AjaxAction id="getRolesByDeptCode">
      <Property name="parameter"></Property>
      <Property name="service">sysOrgInfoAction#getRolesByDeptCode</Property>
      <Property name="async">false</Property>
      <Property name="batchable">true</Property>
    </AjaxAction>
    <UpdateAction id="saveOrgs">
      <Property name="dataResolver">sysOrgInfoAction#saveSysOrgInfos</Property>
      <Property name="successMessage">操作成功！</Property>
      <Property name="executingMessage">正在处理...</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetOrg</Property>
        <Property name="dataPath">!DIRTY_TREE</Property>
      </UpdateItem>
    </UpdateAction>
    <UpdateAction id="saveOrgRoleAction">
      <Property name="executingMessage">正在处理...</Property>
      <Property name="successMessage">操作成功</Property>
      <Property name="dataResolver">sysOrgRoleAction#saveSysOrgRoles</Property>
      <Property name="async">false</Property>
      <Property name="modal">false</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetOrgRole</Property>
      </UpdateItem>
    </UpdateAction>
    <UpdateAction id="saveOrgBusinessAction">
      <Property name="executingMessage">正在处理...</Property>
      <Property name="successMessage">操作成功</Property>
      <Property name="dataResolver">sysObjBusinessAction#saveSysObjBusinesss</Property>
      <Property name="async">true</Property>
      <Property name="modal">false</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetOrgBusiness</Property>
      </UpdateItem>
    </UpdateAction>
  </View>
</ViewConfig>
