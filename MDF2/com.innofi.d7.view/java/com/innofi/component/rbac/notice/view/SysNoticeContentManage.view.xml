<?xml version="1.0" encoding="UTF-8"?>
<ViewConfig>
  <Property name="metaData">
    <Property name="securityTag">SysNoticeContentManage</Property>
  </Property>
  <Arguments/>
  <Context/>
  <Model>
    <DataType name="dataTypeSysNoticeContent" parent="global:dataTypeSysNoticeContent">
      <Property name="autoCreatePropertyDefs">false</Property>
      <Reference name="noticeRole">
        <Property name="dataType">[noticeRole]</Property>
        <Property name="dataProvider">sysNoticeContentRoleAction#findNoticeRolesByNoticeId</Property>
        <Property name="parameter">$${this.id}</Property>
      </Reference>
    </DataType>
    <DataType name="querydataTypeSysNoticeContent">
      <Property name="autoCreatePropertyDefs">false</Property>
      <PropertyDef name="qMnoticeNo">
        <Property name="dataType">String</Property>
        <Property name="defaultValue">eq</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;QUERY_METHOD&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="noticeNo">
        <Property name="dataType">String</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeNo&quot;].propertyLabel}</Property>
      </PropertyDef>
      <PropertyDef name="qMtitle">
        <Property name="dataType">String</Property>
        <Property name="defaultValue">like</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;QUERY_METHOD&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="title">
        <Property name="dataType">String</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyLabel}</Property>
      </PropertyDef>
      <PropertyDef name="qMnoticeType">
        <Property name="dataType">String</Property>
        <Property name="defaultValue">eq</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;QUERY_METHOD&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="noticeType">
        <Property name="dataType">String</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeType&quot;].propertyLabel}</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;NOTICE_TYPE&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="completeDate">
        <Property name="dataType">Date</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.completeDate&quot;].propertyLabel}(起)</Property>
      </PropertyDef>
      <PropertyDef name="completeDateEnd">
        <Property name="dataType">Date</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.completeDate&quot;].propertyLabel}(止)</Property>
      </PropertyDef>
      <PropertyDef name="qMstatus">
        <Property name="dataType">String</Property>
        <Property name="defaultValue">eq</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;QUERY_METHOD&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="status">
        <Property name="dataType">String</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.status&quot;].propertyLabel}</Property>
        <Property name="mapping">
          <Property name="mapValues">${dorado.getDataProvider(&quot;coderCreate#getDict&quot;).getResult(&quot;COMM_STATUS&quot;)}</Property>
        </Property>
      </PropertyDef>
      <PropertyDef name="releaseDate">
        <Property name="dataType">Date</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyLabel}(起)</Property>
      </PropertyDef>
      <PropertyDef name="releaseDateEnd">
        <Property name="dataType">Date</Property>
        <Property name="label">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyLabel}(止)</Property>
      </PropertyDef>
    </DataType>
    <DataType name="noticeRole" parent="dataTypeSysNoticeContentRole">
      <PropertyDef name="roleName">
        <Property name="dataType">String</Property>
        <Property name="label">角色名称</Property>
      </PropertyDef>
    </DataType>
    <DataType name="sysRole" parent="dataTypeSysRole">
      <PropertyDef name="selectFlag">
        <Property name="dataType">boolean</Property>
      </PropertyDef>
    </DataType>
    <DataType name="dataTypeRoleQuery">
      <PropertyDef name="roleName">
        <Property name="dataType">String</Property>
        <Property name="label">角色名称</Property>
      </PropertyDef>
    </DataType>
  </Model>
  <View>
    <Property name="packages">validator</Property>
    <DataSet id="dataSetSysNoticeContent">
      <Property name="dataProvider">sysNoticeContentAction#findSysNoticeContents</Property>
      <Property name="dataType">[dataTypeSysNoticeContent]</Property>
      <Property name="pageSize">${sys.getLong(&quot;mdf.default.pagesize&quot;)}</Property>
    </DataSet>
    <DataSet id="querydataSetSysNoticeContent">
      <ClientEvent name="onReady">self.insert({});</ClientEvent>
      <Property name="dataType">[querydataTypeSysNoticeContent]</Property>
    </DataSet>
    <DataSet id="dataSetRole">
      <Property name="dataType">[sysRole]</Property>
      <Property name="loadMode">manual</Property>
      <Property name="dataProvider">sysNoticeContentRoleAction#findSysRolesByNoticeId</Property>
      <Property name="pageSize">10</Property>
    </DataSet>
    <DataSet id="dataSetRoleQuery">
      <Property name="dataType">dataTypeRoleQuery</Property>
    </DataSet>
    <Container>
      <FieldSet layoutConstraint="top">
        <Property name="caption">查询条件</Property>
        <Property name="collapsed">false</Property>
        <Buttons>
          <Button id="queryButton">
            <ClientEvent name="onClick">
                view.get(&quot;#dataSetSysNoticeContent&quot;).set(&quot;parameter&quot;, view.get(&quot;#querydataSetSysNoticeContent&quot;).getData(&quot;#&quot;)).flushAsync();
            </ClientEvent>
            <Property name="caption">查询</Property>
            <Property name="icon">url(>skin>common/icons.gif) -40px -100px</Property>
          </Button>
          <Button id="resetButton">
            <ClientEvent name="onClick">
                view.get(&quot;#querydataSetSysNoticeContent&quot;).clear();
                view.get(&quot;#querydataSetSysNoticeContent&quot;).getData().insert({});
            </ClientEvent>
            <Property name="icon">url(>skin>common/icons.gif) -280px -220px</Property>
            <Property name="caption">重置</Property>
          </Button>
        </Buttons>
        <Children>
          <AutoForm id="autoFormSysNoticeContentQuery" layoutConstraint="center">
            <Property name="cols">*,*</Property>
            <Property name="dataSet">querydataSetSysNoticeContent</Property>
            <Property name="dataType">querydataTypeSysNoticeContent</Property>
            <Property name="labelAlign">right</Property>
            <Property name="labelWidth">150</Property>
            <AutoFormElement name="autoFormElementtitle">
              <Property name="name">title</Property>
              <Property name="property">title</Property>
              <Editor>
                <Container>
                  <TextEditor layoutConstraint="left">
                    <Property name="property">qMtitle</Property>
                    <Property name="trigger">autoMappingDropDown1</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="width">60</Property>
                  </TextEditor>
                  <TextEditor>
                    <Property name="property">title</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyBlankText}</Property>
                    <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyTip}</Property>
                  </TextEditor>
                </Container>
              </Editor>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementnoticeType">
              <Property name="name">noticeType</Property>
              <Property name="property">noticeType</Property>
              <Editor>
                <Container>
                  <TextEditor layoutConstraint="left">
                    <Property name="property">qMnoticeType</Property>
                    <Property name="trigger">autoMappingDropDown1</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="width">60</Property>
                  </TextEditor>
                  <TextEditor>
                    <Property name="property">noticeType</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeType&quot;].propertyBlankText}</Property>
                    <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeType&quot;].propertyTip}</Property>
                    <Property name="trigger">autoMappingDropDown1</Property>
                  </TextEditor>
                </Container>
              </Editor>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementreleaseDate">
              <Property name="name">releaseDate</Property>
              <Property name="property">releaseDate</Property>
              <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyLabel}(起)</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementreleaseDateEnd">
              <Property name="name">releaseDateEnd</Property>
              <Property name="property">releaseDateEnd</Property>
              <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyLabel}(止)</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementcompleteDate">
              <Property name="name">completeDate</Property>
              <Property name="property">completeDate</Property>
              <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.completeDate&quot;].propertyLabel}(起)</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementcompleteDateEnd">
              <Property name="name">completeDateEnd</Property>
              <Property name="property">completeDateEnd</Property>
              <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.completeDate&quot;].propertyLabel}(止)</Property>
              <Editor/>
            </AutoFormElement>
            <AutoFormElement name="autoFormElementstatus">
              <Property name="name">status</Property>
              <Property name="property">status</Property>
              <Editor>
                <Container>
                  <TextEditor layoutConstraint="left">
                    <Property name="property">qMstatus</Property>
                    <Property name="trigger">autoMappingDropDown1</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="width">60</Property>
                  </TextEditor>
                  <TextEditor>
                    <Property name="property">status</Property>
                    <Property name="dataSet">querydataSetSysNoticeContent</Property>
                    <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.status&quot;].propertyBlankText}</Property>
                    <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.status&quot;].propertyTip}</Property>
                    <Property name="trigger">autoMappingDropDown1</Property>
                  </TextEditor>
                </Container>
              </Editor>
            </AutoFormElement>
          </AutoForm>
        </Children>
      </FieldSet>
      <ToolBar id="toolBarSysNoticeContent" layoutConstraint="top">
        <Property name="tags">tags_toolbar</Property>
        <ToolBarButton id="addButton">
          <ClientEvent name="onClick">
                    view.get(&quot;#dataSetSysNoticeContent&quot;).set(&quot;readOnly&quot;,false);
                    view.get(&quot;#dataSetSysNoticeContent.data&quot;).insert();
                    view.get(&quot;#addDialogSysNoticeContent&quot;).show();
                </ClientEvent>
          <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
          <Property name="caption">添加</Property>
        </ToolBarButton>
        <ToolBarButton id="updateButton">
          <ClientEvent name="onClick">
                    var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData();
                    var selection = view.get(&quot;#dataGridSysNoticeContent&quot;).get(&quot;selection&quot;);
                    if(selection.length==0){
                        dorado.MessageBox.alert(&quot;请选择记录！&quot;);
                    }else if(selection.length>1){
                        dorado.MessageBox.alert(&quot;只能选择一条记录查看修改！&quot;);
                    }else if (selection.length == 1) {
                        view.get(&quot;#dataSetSysNoticeContent&quot;).getData().setCurrent(selection[0]);
                        view.get(&quot;#dialogSysNoticeContent&quot;).show();
                        view.get(&quot;#dataSetSysNoticeContent&quot;).set(&quot;readOnly&quot;,false);
                    }
                </ClientEvent>
          <Property name="caption">修改</Property>
          <Property name="icon">url(>skin>common/icons.gif) -200px -0px</Property>
        </ToolBarButton>
        <ToolBarButton id="delButton">
          <ClientEvent name="onClick">var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData();
                    var selection = view.get(&quot;#dataGridSysNoticeContent&quot;).get(&quot;selection&quot;);
                    var action = view.get(&quot;#saveSysNoticeContentsAction&quot;);
                    if(selection.length==0){
                        dorado.MessageBox.alert(&quot;请选择记录！&quot;);
                    }else if (selection.length != 0) {
                        dorado.MessageBox.confirm(&quot;确定删除？&quot;, function(){
                        jQuery.each(selection,function(i,item){
                            entitys.remove(item);
                        });
                        action.execute();
                        });
                    }
                </ClientEvent>
          <Property name="caption">删除</Property>
          <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
        </ToolBarButton>
        <ToolBarButton id="lookButton">
          <ClientEvent name="onClick">
                    var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData();
                    var found = false;
                    var selection = view.get(&quot;#dataGridSysNoticeContent&quot;).get(&quot;selection&quot;);
                    if(selection.length==0){
                        dorado.MessageBox.alert(&quot;请选择记录！&quot;);
                    }else if(selection.length>1){
                        dorado.MessageBox.alert(&quot;只能查看一条记录！&quot;);
                    }else if (selection.length == 1) {
                    view.get(&quot;#dataSetSysNoticeContent&quot;).getData().setCurrent(selection[0]);
                    view.get(&quot;#lookdialogSysNoticeContent&quot;).show();
                    view.get(&quot;#dataSetSysNoticeContent&quot;).set(&quot;readOnly&quot;,true);
                    }
                </ClientEvent>
          <Property name="caption">查看</Property>
          <Property name="icon">url(>skin>common/icons.gif) -120px -120px</Property>
        </ToolBarButton>
      </ToolBar>
      <Container>
        <DataGrid id="dataGridSysNoticeContent" layoutConstraint="center">
          <ClientEvent name="onDataRowClick">
                    /*var newSelection = [];
                    var selection = self.get(&quot;selection&quot;);
                    var entity = view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#&quot;);
                    var found = false;
                    selection.each(function(data){
                        if (data.get(&quot;id&quot;) == entity.get(&quot;id&quot;)) {
                            found = true;
                        }else{
                            newSelection.push(data);
                        }
                    });
                    if (!found) {
                        newSelection.push(entity);
                    }
                    self.set(&quot;selection&quot;, newSelection);*/
                </ClientEvent>
          <ClientEvent name="onSelectionChange">
                    if (arg.added){
                     view.get(&quot;#dataSetSysNoticeContent&quot;).getData().setCurrent(arg.added[0])
                    }
                </ClientEvent>
          <Property name="dataSet">dataSetSysNoticeContent</Property>
          <Property name="selectionMode">multiRows</Property>
          <Property name="readOnly">true</Property>
          <Property name="dataType">dataTypeSysNoticeContent</Property>
          <Property name="rowHeight">26</Property>
          <Property name="height">100%</Property>
          <Property name="width">100%</Property>
          <Property name="highlightCurrentRow">false</Property>
          <RowNumColumn/>
          <RowSelectorColumn/>
          <DataColumn name="noticeNo" property="noticeNo"/>
          <DataColumn name="title" property="title"/>
          <DataColumn name="noticeType" property="noticeType"/>
          <DataColumn name="releaseDate" property="releaseDate"/>
          <DataColumn name="completeDate" property="completeDate"/>
          <DataColumn name="status" property="status"/>
        </DataGrid>
      </Container>
      <ToolBar layoutConstraint="bottom">
        <DataPilot>
          <Property name="dataSet">dataSetSysNoticeContent</Property>
          <Property name="itemCodes">pages</Property>
        </DataPilot>
        <Separator/>
      </ToolBar>
    </Container>
    <UpdateAction id="saveSysNoticeContentsAction">
      <Property name="executingMessage">正在处理...</Property>
      <Property name="successMessage">操作成功</Property>
      <Property name="dataResolver">sysNoticeContentAction#saveSysNoticeContents</Property>
      <UpdateItem>
        <Property name="dataSet">dataSetSysNoticeContent</Property>
      </UpdateItem>
    </UpdateAction>
    <Dialog id="dialogSysNoticeContent">
      <ClientEvent name="onClose">
            view.get(&quot;#dataSetSysNoticeContent&quot;).getData().cancel();
            view.get(&quot;#dialogSysNoticeContent&quot;).hide();
        </ClientEvent>
      <Property name="caption">信息编辑</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">60%</Property>
      <Property name="height">80%</Property>
      <Property name="contentOverflow">auto</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">
            var action = view.get(&quot;#saveSysNoticeContentsAction&quot;);
            var dialog=view.get(&quot;#dialogSysNoticeContent&quot;);
            action.execute(function(){
                dialog.hide();
            });
          </ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetSysNoticeContent&quot;).getData().cancel();
view.get(&quot;#dialogSysNoticeContent&quot;).hide();
		  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <TabControl>
          <ControlTab>
            <Property name="caption">基本信息</Property>
            <Container>
              <Property name="contentOverflow">auto</Property>
              <AutoForm id="autoFormSysNoticeContent">
                <Property name="dataType">dataTypeSysNoticeContent</Property>
                <Property name="dataSet">dataSetSysNoticeContent</Property>
                <Property name="labelAlign">right</Property>
                <Property name="hideMode">visibility</Property>
                <AutoFormElement>
                  <Property name="name">noticeNo</Property>
                  <Property name="property">noticeNo</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeNo&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeNo&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">title</Property>
                  <Property name="property">title</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">releaseDate</Property>
                  <Property name="property">releaseDate</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">completeDate</Property>
                  <Property name="property">completeDate</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;completeDate&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;completeDate&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">noticeType</Property>
                  <Property name="property">noticeType</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">status</Property>
                  <Property name="property">status</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="readOnly">false</Property>
                  <Editor/>
                </AutoFormElement>
                <FieldSet layoutConstraint="colSpan:2">
                  <Property name="caption">通知公告内容</Property>
                  <Property name="height">280</Property>
                  <Children>
                    <HtmlEditor layoutConstraint="colSpan:2">
                      <Property name="property">content</Property>
                      <Property name="mode">simple</Property>
                      <Property name="dataSet">dataSetSysNoticeContent</Property>
                    </HtmlEditor>
                  </Children>
                </FieldSet>
              </AutoForm>
            </Container>
          </ControlTab>
          <ControlTab>
            <Property name="caption">角色分配</Property>
            <Container>
              <ToolBar id="updtNoticeRole">
                <ToolBarButton>
                  <ClientEvent name="onClick">var noticeId=view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#&quot;).get(&quot;id&quot;);
alert(noticeId);
view.get(&quot;#dataSetRole&quot;).set(&quot;parameter&quot;,{&quot;noticeContentId&quot;:noticeId}).flushAsync();
view.get(&quot;#dialogRole&quot;).show();
</ClientEvent>
                  <Property name="caption">添加</Property>
                  <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
                </ToolBarButton>
                <ToolBarButton>
                  <ClientEvent name="onClick">var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#.noticeRole&quot;);
var selection = view.get(&quot;#updtNoticeRoleGrid&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
			jQuery.each(selection,function(i,item){
			entitys.remove(item);
		});
}</ClientEvent>
                  <Property name="caption">删除</Property>
                  <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
                </ToolBarButton>
              </ToolBar>
              <DataGrid id="updtNoticeRoleGrid">
                <Property name="dataSet">dataSetSysNoticeContent</Property>
                <Property name="selectionMode">multiRows</Property>
                <Property name="readOnly">true</Property>
                <Property name="dataPath">#.noticeRole</Property>
                <RowNumColumn/>
                <RowSelectorColumn/>
                <DataColumn>
                  <Property name="name">roleName</Property>
                  <Property name="property">roleName</Property>
                  <Editor/>
                </DataColumn>
              </DataGrid>
            </Container>
          </ControlTab>
        </TabControl>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="addDialogSysNoticeContent">
      <ClientEvent name="onClose">
         view.get(&quot;#dataSetSysNoticeContent&quot;).getData().cancel();
         view.get(&quot;#dialogSysNoticeContent&quot;).hide();
     </ClientEvent>
      <Property name="caption">新增信息</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">60%</Property>
      <Property name="height">80%</Property>
      <Property name="contentOverflow">auto</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">
              var action = view.get(&quot;#saveSysNoticeContentsAction&quot;);
              var dialog=view.get(&quot;#addDialogSysNoticeContent&quot;);
              action.execute(function(){
                dialog.hide();
              });
          </ClientEvent>
          <Property name="caption">确定</Property>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
        </Button>
        <Button>
          <ClientEvent name="onClick">view.get(&quot;#dataSetSysNoticeContent&quot;).getData().cancel();
view.get(&quot;#addDialogSysNoticeContent&quot;).hide();
		  </ClientEvent>
          <Property name="caption">取消</Property>
          <Property name="icon">url(>skin>common/icons.gif) -180px -160px</Property>
        </Button>
      </Buttons>
      <Children>
        <TabControl>
          <ControlTab>
            <Property name="caption">基本信息</Property>
            <Container>
              <Property name="contentOverflow">auto</Property>
              <AutoForm id="addAutoFormSysNoticeContent">
                <Property name="dataType">dataTypeSysNoticeContent</Property>
                <Property name="dataSet">dataSetSysNoticeContent</Property>
                <Property name="labelAlign">right</Property>
                <Property name="hideMode">visibility</Property>
                <AutoFormElement>
                  <Property name="name">noticeNo</Property>
                  <Property name="property">noticeNo</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeNo&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.noticeNo&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">title</Property>
                  <Property name="property">title</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.title&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">releaseDate</Property>
                  <Property name="property">releaseDate</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;com.innofi.component.rbac.notice.pojo.SysNoticeContent.releaseDate&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">completeDate</Property>
                  <Property name="property">completeDate</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor>
                    <TextEditor>
                      <Property name="blankText">${req[&quot;completeDate&quot;].propertyBlankText}</Property>
                      <Property name="tip">${req[&quot;completeDate&quot;].propertyTip}</Property>
                    </TextEditor>
                  </Editor>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">noticeType</Property>
                  <Property name="property">noticeType</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">status</Property>
                  <Property name="property">status</Property>
                  <Property name="hideMode">display</Property>
                  <Property name="labelAlign">right</Property>
                  <Property name="readOnly">false</Property>
                  <Editor/>
                </AutoFormElement>
                <FieldSet layoutConstraint="colSpan:2">
                  <Property name="caption">通知公告内容</Property>
                  <Property name="height">280</Property>
                  <Children>
                    <HtmlEditor layoutConstraint="colSpan:2">
                      <Property name="property">content</Property>
                      <Property name="mode">simple</Property>
                      <Property name="dataSet">dataSetSysNoticeContent</Property>
                    </HtmlEditor>
                  </Children>
                </FieldSet>
              </AutoForm>
            </Container>
          </ControlTab>
          <ControlTab>
            <Property name="caption">角色分配</Property>
            <Container>
              <ToolBar id="addNoticeRole">
                <ToolBarButton>
                  <ClientEvent name="onClick">view.get(&quot;#dataSetRole&quot;).set(&quot;parameter&quot;,{}).flushAsync();
view.get(&quot;#dialogRole&quot;).show();
</ClientEvent>
                  <Property name="caption">添加</Property>
                  <Property name="icon">url(>skin>common/icons.gif) -120px -0px</Property>
                </ToolBarButton>
                <ToolBarButton>
                  <ClientEvent name="onClick">var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#.noticeRole&quot;);
var selection = view.get(&quot;#noticeRoleGrid&quot;).get(&quot;selection&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
			jQuery.each(selection,function(i,item){
			entitys.remove(item);
		});
}</ClientEvent>
                  <Property name="caption">删除</Property>
                  <Property name="icon">url(>skin>common/icons.gif) -140px -0px</Property>
                </ToolBarButton>
              </ToolBar>
              <DataGrid id="noticeRoleGrid">
                <Property name="dataSet">dataSetSysNoticeContent</Property>
                <Property name="selectionMode">multiRows</Property>
                <Property name="readOnly">true</Property>
                <Property name="dataPath">#.noticeRole</Property>
                <RowNumColumn/>
                <RowSelectorColumn/>
                <DataColumn>
                  <Property name="name">roleName</Property>
                  <Property name="property">roleName</Property>
                  <Editor/>
                </DataColumn>
              </DataGrid>
            </Container>
          </ControlTab>
        </TabControl>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="lookdialogSysNoticeContent">
      <Property name="caption">信息查看</Property>
      <Property name="center">true</Property>
      <Property name="border">normal</Property>
      <Property name="minimizeable">true</Property>
      <Property name="maximizeable">true</Property>
      <Property name="modal">true</Property>
      <Property name="height">80%</Property>
      <Property name="width">60%</Property>
      <Property name="contentOverflow">auto</Property>
      <Buttons/>
      <Children>
        <TabControl>
          <ControlTab>
            <Property name="caption">基本信息</Property>
            <Container>
              <Property name="contentOverflow">auto</Property>
              <AutoForm id="lookFormSysNoticeContent">
                <Property name="dataType">dataTypeSysNoticeContent</Property>
                <Property name="dataSet">dataSetSysNoticeContent</Property>
                <Property name="labelAlign">right</Property>
                <Property name="hideMode">visibility</Property>
                <AutoFormElement>
                  <Property name="name">noticeNo</Property>
                  <Property name="property">noticeNo</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">title</Property>
                  <Property name="property">title</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">releaseDate</Property>
                  <Property name="property">releaseDate</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">completeDate</Property>
                  <Property name="property">completeDate</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">noticeType</Property>
                  <Property name="property">noticeType</Property>
                  <Editor/>
                </AutoFormElement>
                <AutoFormElement>
                  <Property name="name">status</Property>
                  <Property name="property">status</Property>
                  <Editor/>
                </AutoFormElement>
                <FieldSet layoutConstraint="colSpan:2">
                  <Property name="caption">通知公告内容</Property>
                  <Property name="height">280</Property>
                  <Children>
                    <HtmlEditor layoutConstraint="colSpan:2">
                      <ClientEvent name="onCreate">dorado.htmleditor.registerMode(&quot;custom&quot;, ['FullScreen',
'Bold','Italic','Underline','StrikeThrough','Superscript','Subscript','RemoveFormat','|',
'JustifyLeft','JustifyCenter','JustifyRight','JustifyJustify'
]);</ClientEvent>
                      <Property name="property">content</Property>
                      <Property name="mode">custom</Property>
                      <Property name="dataSet">dataSetSysNoticeContent</Property>
                    </HtmlEditor>
                  </Children>
                </FieldSet>
              </AutoForm>
            </Container>
          </ControlTab>
          <ControlTab>
            <Property name="caption">角色分配</Property>
            <DataGrid id="noticeRoleGridLook">
              <Property name="dataSet">dataSetSysNoticeContent</Property>
              <Property name="selectionMode">multiRows</Property>
              <Property name="readOnly">true</Property>
              <Property name="dataPath">#.noticeRole</Property>
              <RowNumColumn/>
              <DataColumn>
                <Property name="name">roleName</Property>
                <Property name="property">roleName</Property>
                <Property name="readOnly">true</Property>
                <Editor/>
              </DataColumn>
            </DataGrid>
          </ControlTab>
        </TabControl>
      </Children>
      <Tools/>
    </Dialog>
    <Dialog id="dialogRole">
      <Property name="caption">用户选择</Property>
      <Property name="center">true</Property>
      <Property name="modal">true</Property>
      <Property name="width">60%</Property>
      <Property name="height">60%</Property>
      <Buttons>
        <Button>
          <ClientEvent name="onClick">var dialog = view.get(&quot;#dialogRole&quot;);
var entitys = view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#.noticeRole&quot;);
var selection = view.get(&quot;#roleMultiList&quot;).get(&quot;selection&quot;);
var noticeId=view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#&quot;).get(&quot;id&quot;);

if(selection.length==0){
	dorado.MessageBox.alert(&quot;请选择记录！&quot;);
}else if (selection.length != 0) {
	jQuery.each(selection,function(i,item){
		//忽略已经存在的按钮
		var bool = true;
		entitys.each(function(entity){
			if(item.get(&quot;id&quot;) == entity.get(&quot;roleId&quot;)){
				bool = false;
				return true;
			}
		});
		if(bool){
			var entity = {
				roleId:item.get(&quot;id&quot;),
				noticeContentId:noticeId,
				roleName:item.get(&quot;roleName&quot;)
			};
			entitys.insert(entity);
		}
	});
	dialog.hide();
}</ClientEvent>
          <Property name="icon">url(>skin>common/icons.gif) -20px -0px</Property>
          <Property name="caption">确定</Property>
        </Button>
      </Buttons>
      <Children>
        <Container id="multiList">
          <Property name="hideMode">display</Property>
          <Property name="visible">true</Property>
          <FieldSet>
            <Property name="collapsed">true</Property>
            <Property name="buttonAlign">right</Property>
            <Property name="caption">查询</Property>
            <Buttons/>
            <Children>
              <AutoForm>
                <Property name="dataSet">dataSetRoleQuery</Property>
                <Property name="cols">*,30</Property>
                <Property name="labelAlign">right</Property>
                <AutoFormElement>
                  <Property name="name">roleName</Property>
                  <Property name="property">roleName</Property>
                  <Property name="showLabel">true</Property>
                  <Property name="trigger">triggerClear</Property>
                  <Editor/>
                </AutoFormElement>
                <Button id="roleMultiListSearch">
                  <ClientEvent name="onClick">var noticeId=view.get(&quot;#dataSetSysNoticeContent&quot;).getData(&quot;#&quot;).get(&quot;id&quot;);
var roleName=view.get(&quot;#dataSetRoleQuery&quot;).getData(&quot;#&quot;).get(&quot;roleName&quot;);
view.get(&quot;#dataSetRole&quot;).set(&quot;parameter&quot;, {&quot;noticeContentId&quot;:noticeId,&quot;roleName&quot;:roleName}).flushAsync();
</ClientEvent>
                  <Property name="caption">查询</Property>
                </Button>
              </AutoForm>
            </Children>
          </FieldSet>
          <DataGrid id="roleMultiList">
            <Property name="dataSet">dataSetRole</Property>
            <Property name="showHeader">true</Property>
            <Property name="selectionMode">multiRows</Property>
            <Property name="rowSelectionProperty">selectFlag</Property>
            <Property name="highlightCurrentRow">false</Property>
            <RowNumColumn/>
            <RowSelectorColumn/>
            <DataColumn>
              <Property name="name">roleName</Property>
              <Property name="property">roleName</Property>
              <Property name="readOnly">true</Property>
              <Editor/>
            </DataColumn>
          </DataGrid>
          <ToolBar id="multiListPilot" layoutConstraint="bottom">
            <Property name="hideMode">display</Property>
            <DataPilot>
              <Property name="itemCodes">pages</Property>
              <Property name="dataSet">dataSetRole</Property>
            </DataPilot>
          </ToolBar>
        </Container>
      </Children>
      <Tools/>
    </Dialog>
  </View>
</ViewConfig>
